(window.webpackJsonp=window.webpackJsonp||[]).push([[325],{1245:function(e,t,n){var o=n(249);e.exports=function(e,t){var n;return o(e,function(e,o,r){return!(n=t(e,o,r))}),!!n}},1246:function(e,t,n){var o=n(591),r=n(114),a=n(1245),c=n(66),l=n(344);e.exports=function(e,t,n){var i=c(e)?o:a;return n&&l(e,t,n)&&(t=void 0),i(e,r(t,3))}},1570:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(4),c=n.n(a),l=n(212),i=n.n(l),s=n(15),u=n(1);function p(){return r.a.createElement("header",{className:"page-header"},r.a.createElement("h1",{className:"page-title"},Object(u.l)("update_key.page")),r.a.createElement("div",{className:"page-description"},Object(u.l)("update_key.page.description")))}var d,m=n(961),f=(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleConfirm=function(){return t.props.newKey?t.props.onConfirm(t.props.component.key,t.props.newKey):Promise.reject(void 0)},t}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.component,r=e.newKey;return o.createElement(m.a,{confirmButtonText:Object(u.l)("update_verb"),modalBody:o.createElement(o.Fragment,null,Object(u.m)("update_key.are_you_sure_to_change_key",n.name),o.createElement("div",{className:"spacer-top"},Object(u.l)("update_key.old_key"),": ",o.createElement("strong",null,n.key)),o.createElement("div",{className:"spacer-top"},Object(u.l)("update_key.new_key"),": ",o.createElement("strong",null,r))),modalHeader:Object(u.l)("update_key.page"),onConfirm:this.handleConfirm},t)},t}(o.PureComponent),b=n(34),h=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.handleChange=function(e){var n=e.currentTarget.value;t.setState({newKey:n})},t.handleReset=function(){t.setState({newKey:void 0})},t}return h(t,e),t.prototype.render=function(){var e=this,t=this.props.component,n=this.state.newKey,r=null!=n?n:t.key,a=r!==t.key;return o.createElement(y,{component:t,newKey:n,onConfirm:this.props.onKeyChange},function(t){var n=t.onFormSubmit;return o.createElement("form",{onSubmit:n},o.createElement("input",{className:"input-super-large",id:"update-key-new-key",onChange:e.handleChange,placeholder:Object(u.l)("update_key.new_key"),required:!0,type:"text",value:r}),o.createElement("div",{className:"spacer-top"},o.createElement(b.f,{disabled:!a,id:"update-key-submit"},Object(u.l)("update_verb")),o.createElement(b.a,{className:"spacer-left",disabled:!a,id:"update-key-reset",onClick:e.handleReset,type:"reset"},Object(u.l)("reset_verb"))))})},t}(o.PureComponent),k=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSubmit=function(e){e.preventDefault();var n=t.refs.replace.value,o=t.refs.by.value;t.props.onSubmit(n,o)},t}return k(t,e),t.prototype.render=function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"modal-field"},r.a.createElement("label",{htmlFor:"bulk-update-replace"},Object(u.l)("update_key.replace")),r.a.createElement("input",{id:"bulk-update-replace",name:"replace",placeholder:Object(u.l)("update_key.replace_example"),ref:"replace",required:!0,type:"text"})),r.a.createElement("div",{className:"modal-field"},r.a.createElement("label",{htmlFor:"bulk-update-by"},Object(u.l)("update_key.by")),r.a.createElement("input",{id:"bulk-update-by",name:"by",placeholder:Object(u.l)("update_key.by_example"),ref:"by",required:!0,type:"text"}),r.a.createElement(b.f,{className:"big-spacer-left",id:"bulk-update-see-results"},Object(u.l)("update_key.see_results"))))},t.propTypes={onSubmit:c.a.func.isRequired},t}(r.a.PureComponent),g=n(1246),E=n.n(g),C=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.results,n=e.replace,o=e.by,a=0===t.length,c=E()(t,function(e){return e.duplicate}),l=!a&&!c;return r.a.createElement("div",{className:"big-spacer-top",id:"bulk-update-simulation"},a&&r.a.createElement("div",{className:"spacer-bottom",id:"bulk-update-nothing"},Object(u.m)("update_key.no_key_to_update",n)),c&&r.a.createElement("div",{className:"spacer-bottom",id:"bulk-update-duplicate"},Object(u.m)("update_key.cant_update_because_duplicate_keys",n,o)),l&&r.a.createElement("div",{className:"spacer-bottom"},Object(u.l)("update_key.keys_will_be_updated_as_follows")),!a&&r.a.createElement("table",{className:"data zebra zebra-hover",id:"bulk-update-results"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,Object(u.l)("update_key.old_key")),r.a.createElement("th",null,Object(u.l)("update_key.new_key")))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{"data-key":e.key,key:e.key},r.a.createElement("td",{className:"js-old-key"},e.key),r.a.createElement("td",{className:"js-new-key"},e.duplicate&&r.a.createElement("span",{className:"spacer-right badge badge-danger"},Object(u.l)("update_key.duplicate_key")),e.newKey))}))),r.a.createElement("div",{className:"big-spacer-top"},l&&r.a.createElement(b.a,{id:"bulk-update-confirm",onClick:this.props.onConfirm},Object(u.l)("update_verb"))))},t.propTypes={results:c.a.array.isRequired,onConfirm:c.a.func.isRequired},t}(r.a.PureComponent),j=function(e){setTimeout(function(){window.location=window.baseUrl+"/project/key?id="+encodeURIComponent(e)},3e3)},w=n(52),S=n(5),N=n(22),P=n(143),M=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={updating:!1,updated:!1,newComponentKey:null},t}return M(t,e),t.prototype.handleSubmit=function(e,t){this.loadResults(e,t)},t.prototype.handleConfirm=function(){var e=this;this.setState({updating:!0});var t=this.props.component,n=this.state,o=n.replace,r=n.by;Object(w.a)(t.key,o,r).then(function(n){var o=n.keys.find(function(e){return e.key===t.key}),r=null!=o?o.newKey:t.key;r!==t.key&&P.a.remove(t.key),e.props.addGlobalSuccessMessage(Object(u.l)("update_key.key_updated.reload")),e.setState({updating:!1}),j(r)}).catch(function(t){e.setState({updating:!1}),Object(S.parseError)(t).then(function(t){return e.props.addGlobalErrorMessage(t)})})},t.prototype.loadResults=function(e,t){var n=this,o=this.props.component;Object(w.a)(o.key,e,t,!0).then(function(o){n.setState({results:o.keys,replace:e,by:t}),n.props.closeAllGlobalMessages()}).catch(function(e){n.setState({results:null}),Object(S.parseError)(e).then(function(e){return n.props.addGlobalErrorMessage(e)})})},t.prototype.renderUpdating=function(){return r.a.createElement("div",{id:"project-key-bulk-update"},r.a.createElement("i",{className:"spinner"}))},t.prototype.render=function(){var e=this.props.component,t=this.state,n=t.updating,o=t.updated,a=this.state,c=a.results,l=a.replace,i=a.by;return n?this.renderUpdating():o?this.renderUpdated():r.a.createElement("div",{id:"project-key-bulk-update"},r.a.createElement("header",{className:"big-spacer-bottom"},r.a.createElement("div",{className:"spacer-bottom"},Object(u.l)("update_key.bulk_change_description")),r.a.createElement("div",null,Object(u.m)("update_key.current_key_for_project_x_is_x",e.name,e.key))),r.a.createElement(v,{onSubmit:this.handleSubmit.bind(this)}),null!=c&&r.a.createElement(O,{results:c,replace:l,by:i,onConfirm:this.handleConfirm.bind(this)}))},t.propTypes={component:c.a.object.isRequired,addGlobalErrorMessage:c.a.func.isRequired,addGlobalSuccessMessage:c.a.func.isRequired,closeAllGlobalMessages:c.a.func.isRequired},t}(r.a.PureComponent),G=Object(s.connect)(null,{addGlobalErrorMessage:N.a,addGlobalSuccessMessage:N.b,closeAllGlobalMessages:N.c})(K),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.handleInputChange=function(e){var n=e.currentTarget.value;t.setState({newKey:n})},t.handleResetClick=function(){t.setState({newKey:void 0})},t}return R(t,e),t.prototype.render=function(){var e=this.props.component,t=this.state.newKey,n=void 0!==t?t:e.key,r=void 0!==t&&t!==e.key;return o.createElement("div",{className:"js-fine-grained-update","data-key":e.key},o.createElement("input",{className:"input-super-large big-spacer-right",onChange:this.handleInputChange,type:"text",value:n}),o.createElement(y,{component:e,newKey:t,onConfirm:this.props.onKeyChange},function(e){var t=e.onClick;return o.createElement(b.a,{disabled:!r,onClick:t},Object(u.l)("update_verb"))}),o.createElement(b.a,{className:"spacer-left",disabled:!r,onClick:this.handleResetClick},Object(u.l)("reset_verb")))},t}(o.PureComponent),A=n(88);function D(e){var t=e.component,n=e.modules,o=[t].concat(n);return r.a.createElement("div",{id:"project-key-fine-grained-update"},r.a.createElement("table",{className:"data zebra"},r.a.createElement("tbody",null,o.map(function(t){return r.a.createElement("tr",{key:t.key},r.a.createElement("td",{className:"width-40"},r.a.createElement(A.a,{qualifier:t.qualifier})," ",t.name),r.a.createElement("td",null,r.a.createElement(q,{component:t,onKeyChange:e.onKeyChange})))}))))}var T=n(40),x=n(13),F=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={tab:"bulk"},t.handleChangeKey=function(e,n){return t.props.changeKey(e,n).then(function(){e===t.props.component.key?(t.props.addGlobalSuccessMessage(Object(u.l)("update_key.key_updated.reload")),P.a.remove(e),j(n)):t.props.addGlobalSuccessMessage(Object(u.l)("update_key.key_updated"))})},t.handleChangeTab=function(e){e.preventDefault(),e.currentTarget.blur();var n=e.currentTarget.dataset.tab;t.setState({tab:n}),t.props.closeAllGlobalMessages()},t}return F(t,e),t.prototype.componentDidMount=function(){this.props.fetchProjectModules(this.props.component.key)},t.prototype.render=function(){var e=this.props,t=e.component,n=e.modules,o=null!=n&&0===n.length,a=null!=n&&n.length>0,c=this.state.tab;return r.a.createElement("div",{className:"page page-limited",id:"project-key"},r.a.createElement(i.a,{title:Object(u.l)("update_key.page")}),r.a.createElement(p,null),null==n&&r.a.createElement("i",{className:"spinner"}),o&&r.a.createElement("div",null,r.a.createElement(_,{component:t,onKeyChange:this.handleChangeKey})),a&&r.a.createElement("div",{className:"boxed-group boxed-group-inner"},r.a.createElement("div",{className:"big-spacer-bottom"},r.a.createElement("ul",{className:"tabs"},r.a.createElement("li",null,r.a.createElement("a",{className:"bulk"===c?"selected":"","data-tab":"bulk",href:"#",id:"update-key-tab-bulk",onClick:this.handleChangeTab},Object(u.l)("update_key.bulk_update"))),r.a.createElement("li",null,r.a.createElement("a",{className:"fine"===c?"selected":"","data-tab":"fine",href:"#",id:"update-key-tab-fine",onClick:this.handleChangeTab},Object(u.l)("update_key.fine_grained_key_update"))))),"bulk"===c&&r.a.createElement(G,{component:t}),"fine"===c&&r.a.createElement(D,{component:t,modules:n,onError:this.props.addGlobalErrorMessage,onKeyChange:this.handleChangeKey,onSuccess:this.props.closeAllGlobalMessages})))},t.propTypes={component:c.a.object,fetchProjectModules:c.a.func.isRequired,changeKey:c.a.func.isRequired,addGlobalErrorMessage:c.a.func.isRequired,addGlobalSuccessMessage:c.a.func.isRequired,closeAllGlobalMessages:c.a.func.isRequired},t}(r.a.PureComponent);t.default=Object(s.connect)(function(e,t){return{modules:Object(x.getProjectAdminProjectModules)(e,t.location.query.id)}},{fetchProjectModules:T.j,changeKey:T.f,addGlobalErrorMessage:N.a,addGlobalSuccessMessage:N.b,closeAllGlobalMessages:N.c})(B)},897:function(e,t,n){"use strict";var o,r=n(0),a=n(87),c=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={submitting:!1},t.stopSubmitting=function(){t.mounted&&t.setState({submitting:!1})},t.handleCloseClick=function(e){e&&(e.preventDefault(),e.currentTarget.blur()),t.props.onClose()},t.handleFormSubmit=function(e){e.preventDefault(),t.submit()},t.handleSubmitClick=function(e){e&&(e.preventDefault(),e.currentTarget.blur()),t.submit()},t.submit=function(){var e=t.props.onSubmit();e&&(t.setState({submitting:!0}),e.then(t.stopSubmitting,t.stopSubmitting))},t}return c(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){return r.createElement(a.a,{contentLabel:this.props.header,onRequestClose:this.props.onClose},this.props.children({onCloseClick:this.handleCloseClick,onFormSubmit:this.handleFormSubmit,onSubmitClick:this.handleSubmitClick,submitting:this.state.submitting}))},t}(r.Component);t.a=l},905:function(e,t,n){"use strict";var o,r=n(0),a=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={modal:!1},t.handleButtonClick=function(){t.setState({modal:!0})},t.handleFormSubmit=function(e){e&&e.preventDefault(),t.setState({modal:!0})},t.handleCloseModal=function(){t.mounted&&t.setState({modal:!1})},t}return a(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){return r.createElement(r.Fragment,null,this.props.children({onClick:this.handleButtonClick,onFormSubmit:this.handleFormSubmit}),this.state.modal&&this.props.modal({onClose:this.handleCloseModal}))},t}(r.PureComponent);t.a=c},912:function(e,t,n){"use strict";var o,r=n(0),a=n(897),c=n(42),l=n(1),i=n(34),s=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.handleSubmit=function(){var e=t.props.onConfirm(t.props.confirmData);return e?e.then(t.props.onClose,function(){}):void t.props.onClose()},t.renderModalContent=function(e){var n=e.onCloseClick,o=e.onFormSubmit,a=e.submitting,s=t.props,u=s.children,p=s.confirmButtonText,d=s.confirmDisable,m=s.header,f=s.isDestructive;return r.createElement("form",{onSubmit:o},r.createElement("header",{className:"modal-head"},r.createElement("h2",null,m)),r.createElement("div",{className:"modal-body"},u),r.createElement("footer",{className:"modal-foot"},r.createElement(c.a,{className:"spacer-right",loading:a}),r.createElement(i.f,{autoFocus:!0,className:f?"button-red":void 0,disabled:a||d},p),r.createElement(i.e,{disabled:a,onClick:n},Object(l.l)("cancel"))))},t}return s(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.header;return r.createElement(a.a,{header:e,onClose:this.props.onClose,onSubmit:this.handleSubmit},this.renderModalContent)},t}(r.PureComponent);t.a=u},961:function(e,t,n){"use strict";var o,r=n(0),a=n(905),c=n(912),l=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderConfirmModal=function(e){var n=e.onClose;return r.createElement(c.a,{confirmButtonText:t.props.confirmButtonText,confirmData:t.props.confirmData,confirmDisable:t.props.confirmDisable,header:t.props.modalHeader,isDestructive:t.props.isDestructive,onClose:n,onConfirm:t.props.onConfirm},t.props.modalBody)},t}return l(t,e),t.prototype.render=function(){return r.createElement(a.a,{modal:this.renderConfirmModal},this.props.children)},t}(r.PureComponent);t.a=i}}]);
//# sourceMappingURL=325.dd4b710d.chunk.js.map