(window.webpackJsonp=window.webpackJsonp||[]).push([[249],{1049:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(0),o=r(212),i=r.n(o);function a(e){var t=e.title,r=e.organization,o=t+(r?" - "+r.name:"");return n.createElement(i.a,{defaultTitle:o,titleTemplate:"%s - "+o})}},1139:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i});var n=["user","codeviewer","issueadmin","admin","scan"],o=["user","admin"],i={TRK:n,VW:o,SVW:o,APP:o,DEV:["user","admin"]}},1584:function(e,t,r){"use strict";r.r(t);var n,o=r(15),i=r(0),a=r.n(i),s=r(4),p=r.n(s),l=r(212),c=r.n(l),u=r(42),m=r(897),f=r(1),d=r(34),h=(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),y=function(e){function t(t){var r=e.call(this,t)||this;return r.mounted=!1,r.handleSubmit=function(){return r.props.onSubmit({description:r.state.description,name:r.state.name,projectKeyPattern:r.state.projectKeyPattern}).then(r.props.onClose)},r.handleNameChange=function(e){r.setState({name:e.currentTarget.value})},r.handleDescriptionChange=function(e){r.setState({description:e.currentTarget.value})},r.handleProjectKeyPatternChange=function(e){r.setState({projectKeyPattern:e.currentTarget.value})},r.state={description:t.permissionTemplate&&t.permissionTemplate.description||"",name:t.permissionTemplate&&t.permissionTemplate.name||"",projectKeyPattern:t.permissionTemplate&&t.permissionTemplate.projectKeyPattern||""},r}return h(t,e),t.prototype.render=function(){var e=this;return i.createElement(m.a,{header:this.props.header,onClose:this.props.onClose,onSubmit:this.handleSubmit},function(t){var r=t.onCloseClick,n=t.onFormSubmit,o=t.submitting;return i.createElement("form",{id:"permission-template-form",onSubmit:n},i.createElement("header",{className:"modal-head"},i.createElement("h2",null,e.props.header)),i.createElement("div",{className:"modal-body"},i.createElement("div",{className:"modal-field"},i.createElement("label",{htmlFor:"permission-template-name"},Object(f.l)("name"),i.createElement("em",{className:"mandatory"},"*")),i.createElement("input",{autoFocus:!0,id:"permission-template-name",maxLength:256,name:"name",onChange:e.handleNameChange,required:!0,type:"text",value:e.state.name}),i.createElement("div",{className:"modal-field-description"},Object(f.l)("should_be_unique"))),i.createElement("div",{className:"modal-field"},i.createElement("label",{htmlFor:"permission-template-description"},Object(f.l)("description")),i.createElement("textarea",{id:"permission-template-description",name:"description",onChange:e.handleDescriptionChange,value:e.state.description})),i.createElement("div",{className:"modal-field"},i.createElement("label",{htmlFor:"permission-template-project-key-pattern"},Object(f.l)("permission_template.key_pattern")),i.createElement("input",{id:"permission-template-project-key-pattern",maxLength:500,name:"projectKeyPattern",onChange:e.handleProjectKeyPatternChange,type:"text",value:e.state.projectKeyPattern}),i.createElement("div",{className:"modal-field-description"},Object(f.l)("permission_template.key_pattern.description")))),i.createElement("footer",{className:"modal-foot"},i.createElement(u.a,{className:"spacer-right",loading:o}),i.createElement(d.f,{disabled:o,id:"permission-template-submit"},e.props.confirmButtonText),i.createElement(d.e,{disabled:o,id:"permission-template-cancel",onClick:r},Object(f.l)("cancel"))))})},t}(i.PureComponent),g=r(968),b=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={createModal:!1},t.handleCreateClick=function(){t.setState({createModal:!0})},t.handleCreateModalClose=function(){t.mounted&&t.setState({createModal:!1})},t.handleCreateModalSubmit=function(e){var r=t.props.organization&&t.props.organization.key;return Object(g.e)(_({},e,{organization:r})).then(function(e){t.props.refresh().then(function(){var n=r?"/organizations/"+r+"/permission_templates":"/permission_templates";t.context.router.push({pathname:n,query:{id:e.permissionTemplate.id}})})})},t}return b(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){return i.createElement("header",{className:"page-header",id:"project-permissions-header"},i.createElement("h1",{className:"page-title"},Object(f.l)("permission_templates.page")),!this.props.ready&&i.createElement("i",{className:"spinner"}),i.createElement("div",{className:"page-actions"},i.createElement(d.a,{onClick:this.handleCreateClick},Object(f.l)("create")),this.state.createModal&&i.createElement(y,{confirmButtonText:Object(f.l)("create"),header:Object(f.l)("permission_template.new_template"),onClose:this.handleCreateModalClose,onSubmit:this.handleCreateModalSubmit})),i.createElement("p",{className:"page-description"},Object(f.l)("permission_templates.page.description")))},t.contextTypes={router:s.object},t}(i.PureComponent),v=r(214),O=r(224),C=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderTooltip=function(e){return"user"===e.key||"codeviewer"===e.key?a.a.createElement("div",null,a.a.createElement(O.a,{message:Object(f.l)("projects_role",e.key,"desc")}),a.a.createElement("div",{className:"alert alert-warning spacer-top"},Object(f.l)("projects_role.public_projects_warning"))):a.a.createElement(O.a,{message:Object(f.l)("projects_role",e.key,"desc")})},t}return C(t,e),t.prototype.render=function(){var e=this,t=this.props.permissions.map(function(t){return a.a.createElement("th",{className:"permission-column",key:t.key},a.a.createElement("span",{className:"text-middle"},Object(f.l)("projects_role",t.key)),a.a.createElement(v.a,{className:"spacer-left",overlay:e.renderTooltip(t)}))});return a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null," "),t,a.a.createElement("th",{className:"thin nowrap text-right"}," ")))},t.propTypes={organization:p.a.object,permissions:p.a.array.isRequired},t}(a.a.PureComponent),P=r(2),T=r(32),w=r.n(T),z=Object(s.shape)({key:s.string.isRequired,name:s.string.isRequired,description:s.string.isRequired,usersCount:s.number.isRequired,groupsCount:s.number.isRequired}),N=Object(s.shape)({id:s.string.isRequired,name:s.string.isRequired,description:s.string,permissions:Object(s.arrayOf)(z).isRequired,defaultFor:Object(s.arrayOf)(s.string).isRequired}),S=s.func.isRequired,k=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.render=function(){var e=this.props.organization&&!this.props.organization.isDefault?["TRK"]:this.props.permissionTemplate.defaultFor,t=w()(e).map(function(e){return Object(f.l)("qualifiers",e)}).join(", ");return a.a.createElement("div",null,a.a.createElement("span",{className:"badge spacer-right"},Object(f.m)("permission_template.default_for",t)))},t.propTypes={organization:p.a.object,permissionTemplate:N.isRequired},t}(a.a.PureComponent),R=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),t.prototype.render=function(){var e=this.props,t=e.permissionTemplate,r=e.organization,n=r?"/organizations/"+r.key+"/permission_templates":"/permission_templates";return a.a.createElement("td",null,a.a.createElement(P.Link,{to:{pathname:n,query:{id:t.id}}},a.a.createElement("strong",{className:"js-name"},t.name)),t.defaultFor.length>0&&a.a.createElement("div",{className:"spacer-top js-defaults"},a.a.createElement(q,{permissionTemplate:this.props.permissionTemplate,organization:r})),!!t.description&&a.a.createElement("div",{className:"spacer-top js-description"},t.description),!!t.projectKeyPattern&&a.a.createElement("div",{className:"spacer-top js-project-key-pattern"},"Project Key Pattern: ",a.a.createElement("code",null,t.projectKeyPattern)))},t.propTypes={organization:p.a.object,permissionTemplate:N.isRequired},t}(a.a.PureComponent),D=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.render=function(){var e=this.props.permission;return a.a.createElement("td",{className:"permission-column","data-permission":e.key},a.a.createElement("div",{className:"permission-column-inner"},a.a.createElement("ul",null,e.withProjectCreator&&a.a.createElement("li",{className:"little-spacer-bottom"},Object(f.l)("permission_templates.project_creators")),a.a.createElement("li",{className:"little-spacer-bottom"},a.a.createElement("strong",null,e.usersCount),"  user(s)"),a.a.createElement("li",null,a.a.createElement("strong",null,e.groupsCount)," group(s)"))))},t.propTypes={permission:z.isRequired},t}(a.a.PureComponent),F=r(921),L=r.n(F);function M(e){var t=e.onClose,r=e.onSubmit,n=e.permissionTemplate,o=Object(f.l)("permission_template.delete_confirm_title");return i.createElement(m.a,{header:o,onClose:t,onSubmit:r},function(e){var t=e.onCloseClick,r=e.onFormSubmit,a=e.submitting;return i.createElement("form",{onSubmit:r},i.createElement("header",{className:"modal-head"},i.createElement("h2",null,o)),i.createElement("div",{className:"modal-body"},Object(f.m)("permission_template.do_you_want_to_delete_template_xxx",n.name)),i.createElement("footer",{className:"modal-foot"},i.createElement(u.a,{className:"spacer-right",loading:a}),i.createElement(d.f,{className:"button-red",disabled:a},Object(f.l)("delete")),i.createElement(d.e,{disabled:a,onClick:t},Object(f.l)("cancel"))))})}var A=r(902),K=r(88),U=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={deleteForm:!1,updateModal:!1},t.handleUpdateClick=function(){t.setState({updateModal:!0})},t.handleCloseUpdateModal=function(){t.mounted&&t.setState({updateModal:!1})},t.handleSubmitUpdateModal=function(e){return Object(g.x)(H({id:t.props.permissionTemplate.id},e)).then(t.props.refresh)},t.handleDeleteClick=function(){t.setState({deleteForm:!0})},t.handleCloseDeleteForm=function(){t.mounted&&t.setState({deleteForm:!1})},t.handleDeleteSubmit=function(){return Object(g.f)({templateId:t.props.permissionTemplate.id}).then(function(){var e=t.props.organization?"/organizations/"+t.props.organization.key+"/permission_templates":"/permission_templates";t.context.router.replace(e),t.props.refresh()})},t.setDefault=function(e){return function(){Object(g.w)(t.props.permissionTemplate.id,e).then(t.props.refresh,function(){})}},t}return U(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.getAvailableQualifiers=function(){var e=this.props.organization&&!this.props.organization.isDefault?["TRK"]:this.props.topQualifiers;return L()(e,this.props.permissionTemplate.defaultFor)},t.prototype.renderSetDefaultsControl=function(){var e=this.getAvailableQualifiers();return 0===e.length?null:1===this.props.topQualifiers.length?this.renderIfSingleTopQualifier(e):this.renderIfMultipleTopQualifiers(e)},t.prototype.renderSetDefaultLink=function(e,t){return i.createElement(A.b,{className:"js-set-default","data-qualifier":e,key:e,onClick:this.setDefault(e)},t)},t.prototype.renderIfSingleTopQualifier=function(e){var t=this;return e.map(function(e){return t.renderSetDefaultLink(e,i.createElement("span",null,Object(f.l)("permission_templates.set_default")))})},t.prototype.renderIfMultipleTopQualifiers=function(e){var t=this;return e.map(function(e){return t.renderSetDefaultLink(e,i.createElement("span",null,Object(f.l)("permission_templates.set_default_for")," ",i.createElement(K.a,{qualifier:e})," ",Object(f.l)("qualifiers",e)))})},t.prototype.render=function(){var e=this.props,t=e.permissionTemplate,r=e.organization,n=r?"/organizations/"+r.key+"/permission_templates":"/permission_templates";return i.createElement(i.Fragment,null,i.createElement(A.c,null,this.renderSetDefaultsControl(),!this.props.fromDetails&&i.createElement(A.b,{to:{pathname:n,query:{id:t.id}}},Object(f.l)("edit_permissions")),i.createElement(A.b,{className:"js-update",onClick:this.handleUpdateClick},Object(f.l)("update_details")),0===t.defaultFor.length&&i.createElement(A.b,{className:"js-delete",destructive:!0,onClick:this.handleDeleteClick},Object(f.l)("delete"))),this.state.updateModal&&i.createElement(y,{confirmButtonText:Object(f.l)("update_verb"),header:Object(f.l)("permission_template.edit_template"),onClose:this.handleCloseUpdateModal,onSubmit:this.handleSubmitUpdateModal,permissionTemplate:t}),this.state.deleteForm&&i.createElement(M,{onClose:this.handleCloseDeleteForm,onSubmit:this.handleDeleteSubmit,permissionTemplate:t}))},t.contextTypes={router:s.object},t}(i.PureComponent),I=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return I(t,e),t.prototype.render=function(){var e=this.props.permissionTemplate.permissions.map(function(e){return a.a.createElement(Q,{key:e.key,permission:e})});return a.a.createElement("tr",{"data-id":this.props.permissionTemplate.id,"data-name":this.props.permissionTemplate.name},a.a.createElement(x,{organization:this.props.organization,permissionTemplate:this.props.permissionTemplate,topQualifiers:this.props.topQualifiers}),e,a.a.createElement("td",{className:"nowrap thin text-right"},a.a.createElement(W,{organization:this.props.organization,permissionTemplate:this.props.permissionTemplate,topQualifiers:this.props.topQualifiers,refresh:this.props.refresh})))},t.propTypes={organization:p.a.object,permissionTemplate:N.isRequired,topQualifiers:p.a.array.isRequired,refresh:S},t}(a.a.PureComponent),G=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return G(t,e),t.prototype.render=function(){var e=this,t=this.props.permissionTemplates.map(function(t){return a.a.createElement(B,{key:t.id,organization:e.props.organization,permissionTemplate:t,topQualifiers:e.props.topQualifiers,refresh:e.props.refresh})});return a.a.createElement("div",{className:"boxed-group boxed-group-inner"},a.a.createElement("table",{id:"permission-templates",className:"data zebra permissions-table"},a.a.createElement(E,{organization:this.props.organization,permissions:this.props.permissions}),a.a.createElement("tbody",null,t)))},t.propTypes={organization:p.a.object,permissionTemplates:p.a.arrayOf(N).isRequired,permissions:p.a.array.isRequired,topQualifiers:p.a.array.isRequired,refresh:S},t}(a.a.PureComponent),J=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return J(t,e),t.prototype.render=function(){return a.a.createElement("div",{className:"page page-limited"},a.a.createElement(c.a,{title:Object(f.l)("permission_templates.page")}),a.a.createElement(j,{organization:this.props.organization,ready:this.props.ready,refresh:this.props.refresh}),a.a.createElement(V,{organization:this.props.organization,permissionTemplates:this.props.permissionTemplates,permissions:this.props.permissions,topQualifiers:this.props.topQualifiers,refresh:this.props.refresh}))},t.propTypes={organization:p.a.object,topQualifiers:p.a.array.isRequired,permissions:p.a.array.isRequired,permissionTemplates:p.a.array.isRequired,ready:p.a.bool.isRequired,refresh:p.a.func.isRequired},t}(a.a.PureComponent),X=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return X(t,e),t.prototype.render=function(){var e=this.props,t=e.template,r=e.organization,n=r?"/organizations/"+r.key+"/permission_templates":"/permission_templates";return a.a.createElement("header",{id:"project-permissions-header",className:"page-header"},a.a.createElement("div",{className:"note spacer-bottom"},a.a.createElement(P.Link,{to:n,className:"text-muted"},Object(f.l)("permission_templates.page"))),a.a.createElement("h1",{className:"page-title"},t.name),this.props.loading&&a.a.createElement("i",{className:"spinner"}),a.a.createElement("div",{className:"pull-right"},a.a.createElement(W,{organization:this.props.organization,permissionTemplate:this.props.template,topQualifiers:this.props.topQualifiers,refresh:this.props.refresh,fromDetails:!0})))},t.propTypes={organization:p.a.object,template:p.a.object.isRequired,loading:p.a.bool.isRequired,refresh:p.a.func.isRequired,topQualifiers:p.a.array.isRequired},t}(a.a.PureComponent),$=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $(t,e),t.prototype.render=function(){var e=this.props.template;return a.a.createElement("div",{className:"big-spacer-bottom"},e.defaultFor.length>0&&a.a.createElement("div",{className:"spacer-top js-defaults"},a.a.createElement(q,{permissionTemplate:e,organization:this.props.organization})),!!e.description&&a.a.createElement("div",{className:"spacer-top js-description"},e.description),!!e.projectKeyPattern&&a.a.createElement("div",{className:"spacer-top js-project-key-pattern"},"Project Key Pattern: ",a.a.createElement("code",null,e.projectKeyPattern)))},t.propTypes={organization:p.a.object,template:p.a.object.isRequired},t}(a.a.PureComponent),te=r(1127),re=r(1142),ne=r(1139),oe=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1,users:[],groups:[],query:"",filter:"all",selectedPermission:null},t.requestHolders=function(e){t.setState({loading:!0});var r=t.props.template,n=t.state,o=n.query,i=n.filter,a=n.selectedPermission,s=[],p=null!=e?e:o;return"groups"!==i?s.push(g.j(r.id,p,a)):s.push(Promise.resolve([])),"users"!==i?s.push(g.i(r.id,p,a)):s.push(Promise.resolve([])),Promise.all(s).then(function(e){t.mounted&&t.setState({users:e[0],groups:e[1],loading:!1})})},t.handleToggleUser=function(e,r){if("<creator>"===e.login)return t.handleToggleProjectCreator(e,r);var n=t.props,o=n.template,i=n.organization,a=e.permissions.includes(r),s={templateId:o.id,login:e.login,permission:r};return i&&(s.organization=i.key),(a?g.v(s):g.q(s)).then(function(){return t.requestHolders()}).then(t.props.refresh)},t.handleToggleProjectCreator=function(e,r){var n=t.props.template;return(e.permissions.includes(r)?g.r(n.id,r):g.a(n.id,r)).then(function(){return t.requestHolders()}).then(t.props.refresh)},t.handleToggleGroup=function(e,r){var n=t.props,o=n.template,i=n.organization,a=e.permissions.includes(r),s={templateId:o.id,groupName:e.name,permission:r};return i&&Object.assign(s,{organization:i.key}),(a?g.u(s):g.p(s)).then(function(){return t.requestHolders()}).then(t.props.refresh)},t.handleSearch=function(e){t.setState({query:e}),t.requestHolders(e)},t.handleFilter=function(e){t.setState({filter:e},t.requestHolders)},t.handleSelectPermission=function(e){e===t.state.selectedPermission?t.setState({selectedPermission:null},t.requestHolders):t.setState({selectedPermission:e},t.requestHolders)},t.shouldDisplayCreator=function(e){var r=t.state,n=r.filter,o=r.query,i=r.selectedPermission,a=Object(f.l)("permission_templates.project_creators"),s="all"!==n,p=!o||a.toLocaleLowerCase().includes(o.toLowerCase()),l=null==i||e.includes(i);return!s&&p&&l},t}return oe(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.requestHolders()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=ne.b.map(function(e){return{key:e,name:Object(f.l)("projects_role",e),description:Object(f.l)("projects_role",e,"desc")}}),t=this.state.users.slice(),r=this.props.template.permissions.filter(function(e){return e.withProjectCreator}).map(function(e){return e.key});if(this.shouldDisplayCreator(r)){var n={login:"<creator>",name:Object(f.l)("permission_templates.project_creators"),permissions:r};t.unshift(n)}return a.a.createElement("div",{className:"page page-limited"},a.a.createElement(c.a,{title:this.props.template.name}),a.a.createElement(Y,{loading:this.state.loading,organization:this.props.organization,refresh:this.props.refresh,template:this.props.template,topQualifiers:this.props.topQualifiers}),a.a.createElement(ee,{organization:this.props.organization,template:this.props.template}),a.a.createElement(te.a,{groups:this.state.groups,onSelectPermission:this.handleSelectPermission,onToggleGroup:this.handleToggleGroup,onToggleUser:this.handleToggleUser,permissions:e,selectedPermission:this.state.selectedPermission,showPublicProjectsWarning:!0,users:t},a.a.createElement(re.a,{filter:this.state.filter,onFilter:this.handleFilter,onSearch:this.handleSearch,query:this.state.query})))},t.propTypes={organization:p.a.object,template:p.a.object.isRequired,refresh:p.a.func.isRequired,topQualifiers:p.a.array.isRequired},t}(a.a.PureComponent),ae=r(1049),se=r(896),pe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},le=["user","codeviewer","issueadmin","admin","scan"];r(1140);var ce=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={ready:!1,permissions:[],permissionTemplates:[]},t.requestPermissions=function(){var e=t.props.organization;return(e?Object(g.k)(e.key):Object(g.k)()).then(function(e){if(t.mounted){var r=function(e){return w()(e,function(e){return le.indexOf(e.key)})}(e.permissions),n=function(e,t){return void 0===t&&(t=[]),e.map(function(e){var r=[];return t.forEach(function(t){t.templateId===e.id&&r.push(t.qualifier)}),pe({},e,{defaultFor:r})})}(function(e,t){return e.map(function(e){var r=t.map(function(t){var r=e.permissions.find(function(e){return e.key===t.key});return pe({usersCount:0,groupsCount:0},t,r)});return pe({},e,{permissions:r})})}(e.permissionTemplates,r),e.defaultTemplates);t.setState({ready:!0,permissionTemplates:n,permissions:r})}})},t}return ce(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.requestPermissions()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.renderTemplate=function(e){if(!this.state.ready)return null;var t=this.state.permissionTemplates.find(function(t){return t.id===e});return a.a.createElement(ie,{organization:this.props.organization,template:t,refresh:this.requestPermissions,topQualifiers:this.props.topQualifiers})},t.prototype.renderHome=function(){return a.a.createElement(Z,{organization:this.props.organization,topQualifiers:this.props.topQualifiers,permissions:this.state.permissions,permissionTemplates:this.state.permissionTemplates,ready:this.state.ready,refresh:this.requestPermissions})},t.prototype.render=function(){var e=this.props.location.query.id;return a.a.createElement("div",null,a.a.createElement(se.a,{suggestions:"permission_templates"}),a.a.createElement(ae.a,{title:Object(f.l)("permission_templates.page"),organization:this.props.organization}),e&&this.renderTemplate(e),!e&&this.renderHome())},t.propTypes={location:p.a.object.isRequired,organization:p.a.object,topQualifiers:p.a.array.isRequired},t}(a.a.PureComponent),me=r(979),fe=r(13),de=r(136);t.default=Object(me.a)(Object(o.connect)(function(e){return{topQualifiers:Object(de.b)(Object(fe.getAppState)(e)).filter(function(e){return"APP"!==e})}})(ue))},896:function(e,t,r){"use strict";var n,o=r(0),i=r(4),a=(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.componentDidMount=function(){this.context.suggestions.addSuggestions(this.props.suggestions)},t.prototype.componentDidUpdate=function(e){e.suggestions!==this.props.suggestions&&(this.context.suggestions.removeSuggestions(this.props.suggestions),this.context.suggestions.addSuggestions(e.suggestions))},t.prototype.componentWillUnmount=function(){this.context.suggestions.removeSuggestions(this.props.suggestions)},t.prototype.render=function(){return null},t.contextTypes={suggestions:i.object.isRequired},t}(o.PureComponent);t.a=s},897:function(e,t,r){"use strict";var n,o=r(0),i=r(87),a=(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={submitting:!1},t.stopSubmitting=function(){t.mounted&&t.setState({submitting:!1})},t.handleCloseClick=function(e){e&&(e.preventDefault(),e.currentTarget.blur()),t.props.onClose()},t.handleFormSubmit=function(e){e.preventDefault(),t.submit()},t.handleSubmitClick=function(e){e&&(e.preventDefault(),e.currentTarget.blur()),t.submit()},t.submit=function(){var e=t.props.onSubmit();e&&(t.setState({submitting:!0}),e.then(t.stopSubmitting,t.stopSubmitting))},t}return a(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){return o.createElement(i.a,{contentLabel:this.props.header,onRequestClose:this.props.onClose},this.props.children({onCloseClick:this.handleCloseClick,onFormSubmit:this.handleFormSubmit,onSubmitClick:this.handleSubmitClick,submitting:this.state.submitting}))},t}(o.Component);t.a=s},902:function(e,t,r){"use strict";var n=r(0),o=r(7),i=r(2),a=r(51),s=r(133),p=r(11);function l(e){var t=e.className,r=e.fill,o=void 0===r?"currentColor":r,i=e.size,a=void 0===i?14:i;return n.createElement(p.a,{className:t,size:a,viewBox:"0 0 14 14"},n.createElement("g",{transform:"matrix(0.0364583,0,0,0.0364583,0,-1.16667)"},n.createElement("path",{d:"M256,224C256,206.333 249.75,191.25 237.25,178.75C224.75,166.25 209.667,160 192,160C174.333,160 159.25,166.25 146.75,178.75C134.25,191.25 128,206.333 128,224C128,241.667 134.25,256.75 146.75,269.25C159.25,281.75 174.333,288 192,288C209.667,288 224.75,281.75 237.25,269.25C249.75,256.75 256,241.667 256,224ZM384,196.75L384,252.25C384,254.25 383.333,256.167 382,258C380.667,259.833 379,260.917 377,261.25L330.75,268.25C327.583,277.25 324.333,284.833 321,291C326.833,299.333 335.75,310.833 347.75,325.5C349.417,327.5 350.25,329.583 350.25,331.75C350.25,333.917 349.5,335.833 348,337.5C343.5,343.667 335.25,352.667 323.25,364.5C311.25,376.333 303.417,382.25 299.75,382.25C297.75,382.25 295.583,381.5 293.25,380L258.75,353C251.417,356.833 243.833,360 236,362.5C233.333,385.167 230.917,400.667 228.75,409C227.583,413.667 224.583,416 219.75,416L164.25,416C161.917,416 159.875,415.292 158.125,413.875C156.375,412.458 155.417,410.667 155.25,408.5L148.25,362.5C140.083,359.833 132.583,356.75 125.75,353.25L90.5,380C88.833,381.5 86.75,382.25 84.25,382.25C81.917,382.25 79.833,381.333 78,379.5C57,360.5 43.25,346.5 36.75,337.5C35.583,335.833 35,333.917 35,331.75C35,329.75 35.667,327.833 37,326C39.5,322.5 43.75,316.958 49.75,309.375C55.75,301.792 60.25,295.917 63.25,291.75C58.75,283.417 55.333,275.167 53,267L7.25,260.25C5.083,259.917 3.333,258.875 2,257.125C0.667,255.375 0,253.417 0,251.25L0,195.75C0,193.75 0.667,191.833 2,190C3.333,188.167 4.917,187.083 6.75,186.75L53.25,179.75C55.583,172.083 58.833,164.417 63,156.75C56.333,147.25 47.417,135.75 36.25,122.25C34.583,120.25 33.75,118.25 33.75,116.25C33.75,114.583 34.5,112.667 36,110.5C40.333,104.5 48.542,95.542 60.625,83.625C72.708,71.708 80.583,65.75 84.25,65.75C86.417,65.75 88.583,66.583 90.75,68.25L125.25,95C132.583,91.167 140.167,88 148,85.5C150.667,62.833 153.083,47.333 155.25,39C156.417,34.333 159.417,32 164.25,32L219.75,32C222.083,32 224.125,32.708 225.875,34.125C227.625,35.542 228.583,37.333 228.75,39.5L235.75,85.5C243.917,88.167 251.417,91.25 258.25,94.75L293.75,68C295.25,66.5 297.25,65.75 299.75,65.75C301.917,65.75 304,66.583 306,68.25C327.5,88.083 341.25,102.25 347.25,110.75C348.417,112.083 349,113.917 349,116.25C349,118.25 348.333,120.167 347,122C344.5,125.5 340.25,131.042 334.25,138.625C328.25,146.208 323.75,152.083 320.75,156.25C325.083,164.583 328.5,172.75 331,180.75L376.75,187.75C378.917,188.083 380.667,189.125 382,190.875C383.333,192.625 384,194.583 384,196.75Z",style:{fill:o}})))}var c=r(34);r.d(t,"c",function(){return f}),r.d(t,"b",function(){return d}),r.d(t,"a",function(){return h});var u,m=(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function f(e){return n.createElement(a.b,{className:e.className,onOpen:e.onOpen,overlay:n.createElement("ul",{className:"menu"},e.children)},n.createElement(c.a,{className:o("dropdown-toggle",e.toggleClassName,{"button-small":e.small})},n.createElement(l,{size:e.small?12:14}),n.createElement(s.a,{className:"little-spacer-left"})))}var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.currentTarget.blur(),t.props.onClick&&t.props.onClick()},t}return m(t,e),t.prototype.render=function(){var e=o(this.props.className,{"text-danger":this.props.destructive});return this.props.download&&"string"==typeof this.props.to?n.createElement("li",null,n.createElement("a",{className:e,download:this.props.download,href:this.props.to,id:this.props.id},this.props.children)):this.props.to?n.createElement("li",null,n.createElement(i.Link,{className:e,id:this.props.id,to:this.props.to},this.props.children)):n.createElement("li",null,n.createElement("a",{className:e,href:"#",id:this.props.id,onClick:this.handleClick},this.props.children))},t}(n.PureComponent);function h(){return n.createElement("li",{className:"divider"})}},921:function(e,t,r){var n=r(343),o=r(221),i=r(219),a=r(339),s=i(function(e,t){return a(e)?n(e,o(t,1,a,!0)):[]});e.exports=s},979:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n,o=r(0),i=r(15),a=r(2),s=r(13),p=(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};function u(e){var t=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return p(r,t),r.prototype.render=function(){var t=this.props,r=t.customOrganizations,n=t.router,i=c(t,["customOrganizations","router"]);return!i.params.organizationKey&&r?(n.replace("/not_found"),null):o.createElement(e,l({},i))},r.displayName="forSingleOrganization("+e.displayName+")}",r}(o.Component);return Object(i.connect)(function(e){return{customOrganizations:Object(s.areThereCustomOrganizations)(e)}})(Object(a.withRouter)(t))}}}]);
//# sourceMappingURL=249.99889169.chunk.js.map