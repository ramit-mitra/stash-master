{"version":3,"sources":["webpack:///./src/main/js/app/components/extensions/GlobalPageExtension.js","webpack:///./src/main/js/app/components/extensions/utils.js","webpack:///./src/main/js/app/components/extensions/Extension.js","webpack:///./src/main/js/app/components/extensions/ExtensionContainer.tsx","webpack:///./src/main/js/app/components/extensions/ExtensionNotFound.tsx"],"names":["__webpack_exports__","Object","react_redux__WEBPACK_IMPORTED_MODULE_1__","state","globalPages","_store_rootReducer__WEBPACK_IMPORTED_MODULE_4__","props","_a","params","extensionKey","pluginKey","extension","find","p","key","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_ExtensionContainer__WEBPACK_IMPORTED_MODULE_2__","_ExtensionNotFound__WEBPACK_IMPORTED_MODULE_3__","getExtensionStart","Promise","resolve","reject","fromCache","installExtensionsHandler","scriptTag","document","src","window","baseUrl","onload","getElementsByTagName","appendChild","installScript","then","start","Extension_Extension","_super","Extension","_this","apply","this","arguments","handleStart","store","getStore","stop","__assign","el","container","currentUser","intl","location","router","options","handleFailure","onFail","l10n","__extends","prototype","componentDidMount","startExtension","componentDidUpdate","prevProps","stopExtension","hash","componentWillUnmount","render","index_js_exposed_default","Helmet_default","title","name","ref","PureComponent","extensions_Extension","index_es","react_router_es","mapDispatchToProps","es","rootReducer","ExtensionNotFound","react__WEBPACK_IMPORTED_MODULE_0__","id","className","react_router__WEBPACK_IMPORTED_MODULE_1__","to"],"mappings":"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","file":"js/334.db61a10a.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport ExtensionContainer from './ExtensionContainer';\nimport ExtensionNotFound from './ExtensionNotFound';\nimport { getAppState } from '../../../store/rootReducer';\n\n/*::\ntype Props = {\n  globalPages: Array<{ key: string }>,\n  params: {\n    extensionKey: string,\n    pluginKey: string\n  }\n};\n*/\n\nfunction GlobalPageExtension(props /*: Props */) {\n  const { extensionKey, pluginKey } = props.params;\n  const extension = props.globalPages.find(p => p.key === `${pluginKey}/${extensionKey}`);\n  return extension ? <ExtensionContainer extension={extension} /> : <ExtensionNotFound />;\n}\n\nconst mapStateToProps = state => ({\n  globalPages: getAppState(state).globalPages\n});\n\nexport default connect(mapStateToProps)(GlobalPageExtension);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport { getExtensionFromCache } from '../../utils/installExtensionsHandler';\n\nfunction installScript(key /*: string */) {\n  return new Promise(resolve => {\n    const scriptTag = document.createElement('script');\n    scriptTag.src = `${window.baseUrl}/static/${key}.js`;\n    scriptTag.onload = resolve;\n    document.getElementsByTagName('body')[0].appendChild(scriptTag);\n  });\n}\n\nexport function getExtensionStart(key /*: string */) {\n  return new Promise((resolve, reject) => {\n    const fromCache = getExtensionFromCache(key);\n    if (fromCache) {\n      return resolve(fromCache);\n    }\n\n    installScript(key).then(() => {\n      const start = getExtensionFromCache(key);\n      if (start) {\n        resolve(start);\n      } else {\n        reject();\n      }\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { injectIntl } from 'react-intl';\nimport { getExtensionStart } from './utils';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { translate } from '../../../helpers/l10n';\nimport getStore from '../../utils/getStore';\n\n/*::\ntype Props = {\n  currentUser: Object,\n  extension: {\n    key: string,\n    name: string\n  },\n  intl: Object,\n  location: { hash: string },\n  onFail: string => void,\n  options?: {},\n  router: Object\n};\n*/\n\nclass Extension extends React.PureComponent {\n  /*:: container: Object; */\n  /*:: props: Props; */\n  /*:: stop: ?Function; */\n\n  componentDidMount() {\n    this.startExtension();\n  }\n\n  componentDidUpdate(prevProps /*: Props */) {\n    if (prevProps.extension !== this.props.extension) {\n      this.stopExtension();\n      this.startExtension();\n    } else if (\n      prevProps.location !== this.props.location &&\n      // old router from backbone app updates hash, don't react in this case\n      prevProps.location.hash === this.props.location.hash\n    ) {\n      this.startExtension();\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopExtension();\n  }\n\n  handleStart = (start /*: Function */) => {\n    const store = getStore();\n    this.stop = start({\n      store,\n      el: this.container,\n      currentUser: this.props.currentUser,\n      intl: this.props.intl,\n      location: this.props.location,\n      router: this.props.router,\n      ...this.props.options\n    });\n  };\n\n  handleFailure = () => {\n    this.props.onFail(translate('page_extension_failed'));\n  };\n\n  startExtension() {\n    const { extension } = this.props;\n    getExtensionStart(extension.key).then(this.handleStart, this.handleFailure);\n  }\n\n  stopExtension() {\n    if (this.stop) {\n      this.stop();\n      this.stop = null;\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Helmet title={this.props.extension.name} />\n        <div ref={container => (this.container = container)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(withRouter(Extension));\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport Extension from './Extension';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\n\nconst mapStateToProps = (state: any) => ({\n  currentUser: getCurrentUser(state)\n});\n\nconst mapDispatchToProps = { onFail: addGlobalErrorMessage };\n\nexport default connect<any, any, any>(mapStateToProps, mapDispatchToProps)(Extension);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nexport default function ExtensionNotFound() {\n  return (\n    <div id=\"bd\" className=\"page-wrapper-simple\">\n      <div id=\"nonav\" className=\"page-simple\">\n        <h2 className=\"big-spacer-bottom\">The page you were looking for does not exist.</h2>\n        <p className=\"spacer-bottom\">\n          You may have mistyped the address or the page may have moved.\n        </p>\n        <p>\n          <Link to=\"/\">Go back to the homepage</Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}