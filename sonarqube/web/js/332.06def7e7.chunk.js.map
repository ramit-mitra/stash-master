{"version":3,"sources":["webpack:///./src/main/js/app/components/extensions/PortfoliosPage.js","webpack:///./src/main/js/app/components/extensions/GlobalPageExtension.js","webpack:///./src/main/js/app/components/extensions/utils.js","webpack:///./src/main/js/app/components/extensions/Extension.js","webpack:///./src/main/js/app/components/extensions/ExtensionContainer.tsx","webpack:///./src/main/js/app/components/extensions/ExtensionNotFound.tsx"],"names":["PortfoliosPage","props","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_GlobalPageExtension__WEBPACK_IMPORTED_MODULE_1__","location","params","pluginKey","extensionKey","__webpack_exports__","Object","react_redux__WEBPACK_IMPORTED_MODULE_1__","state","globalPages","_store_rootReducer__WEBPACK_IMPORTED_MODULE_4__","_a","extension","find","p","key","_ExtensionContainer__WEBPACK_IMPORTED_MODULE_2__","_ExtensionNotFound__WEBPACK_IMPORTED_MODULE_3__","getExtensionStart","Promise","resolve","reject","fromCache","installExtensionsHandler","scriptTag","document","src","window","baseUrl","onload","getElementsByTagName","appendChild","installScript","then","start","Extension_Extension","_super","Extension","_this","apply","this","arguments","handleStart","store","getStore","stop","__assign","el","container","currentUser","intl","router","options","handleFailure","onFail","l10n","__extends","prototype","componentDidMount","startExtension","componentDidUpdate","prevProps","stopExtension","hash","componentWillUnmount","render","index_js_exposed_default","Helmet_default","title","name","ref","PureComponent","extensions_Extension","index_es","react_router_es","mapDispatchToProps","es","rootReducer","ExtensionNotFound","react__WEBPACK_IMPORTED_MODULE_0__","id","className","react_router__WEBPACK_IMPORTED_MODULE_1__","to"],"mappings":"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","file":"js/332.06def7e7.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport GlobalPageExtension from './GlobalPageExtension';\n\nexport default function PortfoliosPage(props /*: Object */) {\n  return (\n    <div>\n      <GlobalPageExtension\n        location={props.location}\n        params={{ pluginKey: 'governance', extensionKey: 'portfolios' }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport ExtensionContainer from './ExtensionContainer';\nimport ExtensionNotFound from './ExtensionNotFound';\nimport { getAppState } from '../../../store/rootReducer';\n\n/*::\ntype Props = {\n  globalPages: Array<{ key: string }>,\n  params: {\n    extensionKey: string,\n    pluginKey: string\n  }\n};\n*/\n\nfunction GlobalPageExtension(props /*: Props */) {\n  const { extensionKey, pluginKey } = props.params;\n  const extension = props.globalPages.find(p => p.key === `${pluginKey}/${extensionKey}`);\n  return extension ? <ExtensionContainer extension={extension} /> : <ExtensionNotFound />;\n}\n\nconst mapStateToProps = state => ({\n  globalPages: getAppState(state).globalPages\n});\n\nexport default connect(mapStateToProps)(GlobalPageExtension);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport { getExtensionFromCache } from '../../utils/installExtensionsHandler';\n\nfunction installScript(key /*: string */) {\n  return new Promise(resolve => {\n    const scriptTag = document.createElement('script');\n    scriptTag.src = `${window.baseUrl}/static/${key}.js`;\n    scriptTag.onload = resolve;\n    document.getElementsByTagName('body')[0].appendChild(scriptTag);\n  });\n}\n\nexport function getExtensionStart(key /*: string */) {\n  return new Promise((resolve, reject) => {\n    const fromCache = getExtensionFromCache(key);\n    if (fromCache) {\n      return resolve(fromCache);\n    }\n\n    installScript(key).then(() => {\n      const start = getExtensionFromCache(key);\n      if (start) {\n        resolve(start);\n      } else {\n        reject();\n      }\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { injectIntl } from 'react-intl';\nimport { getExtensionStart } from './utils';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { translate } from '../../../helpers/l10n';\nimport getStore from '../../utils/getStore';\n\n/*::\ntype Props = {\n  currentUser: Object,\n  extension: {\n    key: string,\n    name: string\n  },\n  intl: Object,\n  location: { hash: string },\n  onFail: string => void,\n  options?: {},\n  router: Object\n};\n*/\n\nclass Extension extends React.PureComponent {\n  /*:: container: Object; */\n  /*:: props: Props; */\n  /*:: stop: ?Function; */\n\n  componentDidMount() {\n    this.startExtension();\n  }\n\n  componentDidUpdate(prevProps /*: Props */) {\n    if (prevProps.extension !== this.props.extension) {\n      this.stopExtension();\n      this.startExtension();\n    } else if (\n      prevProps.location !== this.props.location &&\n      // old router from backbone app updates hash, don't react in this case\n      prevProps.location.hash === this.props.location.hash\n    ) {\n      this.startExtension();\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopExtension();\n  }\n\n  handleStart = (start /*: Function */) => {\n    const store = getStore();\n    this.stop = start({\n      store,\n      el: this.container,\n      currentUser: this.props.currentUser,\n      intl: this.props.intl,\n      location: this.props.location,\n      router: this.props.router,\n      ...this.props.options\n    });\n  };\n\n  handleFailure = () => {\n    this.props.onFail(translate('page_extension_failed'));\n  };\n\n  startExtension() {\n    const { extension } = this.props;\n    getExtensionStart(extension.key).then(this.handleStart, this.handleFailure);\n  }\n\n  stopExtension() {\n    if (this.stop) {\n      this.stop();\n      this.stop = null;\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Helmet title={this.props.extension.name} />\n        <div ref={container => (this.container = container)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(withRouter(Extension));\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport Extension from './Extension';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\n\nconst mapStateToProps = (state: any) => ({\n  currentUser: getCurrentUser(state)\n});\n\nconst mapDispatchToProps = { onFail: addGlobalErrorMessage };\n\nexport default connect<any, any, any>(mapStateToProps, mapDispatchToProps)(Extension);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nexport default function ExtensionNotFound() {\n  return (\n    <div id=\"bd\" className=\"page-wrapper-simple\">\n      <div id=\"nonav\" className=\"page-simple\">\n        <h2 className=\"big-spacer-bottom\">The page you were looking for does not exist.</h2>\n        <p className=\"spacer-bottom\">\n          You may have mistyped the address or the page may have moved.\n        </p>\n        <p>\n          <Link to=\"/\">Go back to the homepage</Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}