{"version":3,"sources":["webpack:///./src/main/js/api/plugins.ts","webpack:///./node_modules/lodash/findLastIndex.js","webpack:///./src/main/js/components/nav/NavBarNotif.tsx","webpack:///./src/main/js/components/common/RestartForm.tsx","webpack:///./src/main/js/store/marketplace/actions.ts","webpack:///./src/main/js/app/components/nav/settings/PendingPluginsActionNotif.tsx","webpack:///./src/main/js/app/components/nav/settings/SettingsNav.tsx","webpack:///./src/main/js/app/components/AdminContainer.tsx","webpack:///./node_modules/lodash/toInteger.js","webpack:///./node_modules/lodash/_baseFindIndex.js","webpack:///./src/main/js/api/system.ts","webpack:///./src/main/js/app/utils/handleRequiredAuthorization.js"],"names":["getAvailablePlugins","Object","_helpers_request__WEBPACK_IMPORTED_MODULE_1__","catch","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_2__","getPendingPlugins","getLastUpdates","updates","map","status","index","lodash_findLastIndex__WEBPACK_IMPORTED_MODULE_0___default","update","undefined","filter","Boolean","addChangelog","indexOf","previousUpdates","slice","__assign","getInstalledPlugins","f","then","_a","plugins","getInstalledPluginsWithUpdates","Promise","all","installed","plugin","updatePlugin","find","p","key","getPluginUpdates","installPlugin","data","uninstallPlugin","cancelPendingPlugins","baseFindIndex","__webpack_require__","baseIteratee","toInteger","nativeMax","Math","max","nativeMin","min","module","exports","array","predicate","fromIndex","length","NavBarNotif","props","children","react__WEBPACK_IMPORTED_MODULE_0__","className","classnames__WEBPACK_IMPORTED_MODULE_1__","navbar-notif-cancelable","onCancel","_ui_buttons__WEBPACK_IMPORTED_MODULE_2__","onClick","RestartForm","_super","_this","apply","this","arguments","state","restarting","handleFormSubmit","event","preventDefault","setState","_api_system__WEBPACK_IMPORTED_MODULE_2__","document","location","reload","__extends","prototype","render","header","_helpers_l10n__WEBPACK_IMPORTED_MODULE_5__","_components_controls_Modal__WEBPACK_IMPORTED_MODULE_3__","contentLabel","onRequestClose","onClose","id","onSubmit","text-center","_ui_buttons__WEBPACK_IMPORTED_MODULE_4__","fetchPendingPlugins","dispatch","_api_plugins__WEBPACK_IMPORTED_MODULE_0__","pending","type","setPendingPlugins","PendingPluginsActionNotif","openRestart","handleOpenRestart","hanleCloseRestart","handleRevert","refreshPending","installing","updating","removing","index_js_exposed","InstanceMessage","message","l10n","msg","idx","index_es","defaultMessage","values","nb","buttons","SettingsNav","renderExtension","name","react_router_es","activeClassName","to","SettingsNav_extends","isSomethingActive","urls","path","window","pathname","some","url","baseUrl","isSecurityActive","isProjectsActive","isSystemActive","isMarketplace","renderConfigurationTab","organizationsEnabled","extensionsWithoutSupport","extensions","extension","Dropdown","overlay","tagName","onToggleClick","open","aria-expanded","String","aria-haspopup","classnames","active","href","DropdownIcon","renderProjectsTab","renderSecurityTab","notifComponent","pendingPlugins","hasSupportExtension","settings_PendingPluginsActionNotif","ContextNavBar","height","theme","notif","NavBarTabs","defaultProps","AdminContainer_AdminContainer","AdminContainer","fetchNavigationSettings","nav","r","setAdminPages","AdminContainer_extends","componentDidMount","context","canAdmin","handleRequiredAuthorization","appState","adminPages","defaultTitle","Helmet_default","a","titleTemplate","settings_SettingsNav","contextTypes","prop_types","isRequired","mapDispatchToProps","actions","duck","__webpack_exports__","es","rootReducer","toFinite","value","result","remainder","fromRight","HealthType","setLogLevel","level","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","getSystemInfo","getSystemStatus","getSystemUpgrades","getMigrationStatus","migrateDatabase","POLLING_INTERVAL","promiseStatus","resolve","pollStatus","cb","setTimeout","restartAndWait","store","_getStore__WEBPACK_IMPORTED_MODULE_0__","history","_getHistory__WEBPACK_IMPORTED_MODULE_1__","returnTo","search","hash","_store_appState_duck__WEBPACK_IMPORTED_MODULE_2__","replace","query","return_to"],"mappings":"skBA2EM,SAAAA,IAIJ,OAAOC,OAAAC,EAAA,QAAAD,CAAQ,0BAA0BE,MAAMC,EAAA,GAG3C,SAAAC,IACJ,OAAOJ,OAAAC,EAAA,QAAAD,CAAQ,wBAAwBE,MAAMC,EAAA,GAG/C,SAAAE,EAAwBC,GACtB,OAAKA,GAGe,aAAc,0BAA2B,+BAA+BC,IAC1F,SAAAC,GACE,IAAMC,EAAQC,IAAcJ,EAAS,SAAAK,GAAU,OAAAA,EAAOH,SAAPA,IAC/C,OAAOC,GAAS,EAAIH,EAAQG,QAASG,IAGvBC,OAAOC,YAG3B,SAAAC,EAAsBJ,EAAgBL,GACpC,IAAKA,EACH,OAAOK,EAET,IAAMF,EAAQH,EAAQU,QAAQL,GACxBM,EAAkBR,EAAQ,EAAIH,EAAQY,MAAM,EAAGT,MACrD,OAAAU,KAAYR,GAAQM,gBAAeA,IAG/B,SAAAG,IACJ,OAAOpB,OAAAC,EAAA,QAAAD,CAAQ,0BAA4BqB,EAAG,aAAcC,KAC1D,SAACC,GAAgB,OAAdA,EAAAC,SACHrB,EAAA,GAIE,SAAAsB,IACJ,OAAOC,QAAQC,KACb3B,OAAAC,EAAA,QAAAD,CAAQ,0BAA4BqB,EAAG,aACvCrB,OAAAC,EAAA,QAAAD,CAAQ,0BAEPsB,KAAK,SAACC,OAACK,EAAAL,EAAA,GAAWjB,EAAAiB,EAAA,GACjB,OAAAK,EAAUJ,QAAQjB,IAAI,SAACsB,GACrB,IAAMC,EAAgCxB,EAAQkB,QAAQO,KACpD,SAACC,GAAuB,OAAAA,EAAEC,MAAQJ,EAAVI,MAE1B,OAAIH,EACFX,KACKW,EACAD,GACHvB,QAASD,EAAeyB,EAAaxB,SAASC,IAAI,SAAAI,GAChD,OAAAI,EAAaJ,EAAQmB,EAAaxB,aAIjCuB,MAGV3B,MAAMC,EAAA,GAGL,SAAA+B,IACJ,OAAOR,QAAQC,KAAK3B,OAAAC,EAAA,QAAAD,CAAQ,wBAAyBA,OAAAC,EAAA,QAAAD,CAAQ,4BAC1DsB,KAAK,SAACC,OAACjB,EAAAiB,EAAA,GAASK,EAAAL,EAAA,GACf,OAAAjB,EAAQkB,QAAQjB,IAAI,SAACuB,GACnB,IAAMxB,EAAUD,EAAeyB,EAAaxB,SAASC,IAAI,SAAAI,GACvD,OAAAI,EAAaJ,EAAQmB,EAAaxB,WAE9BuB,EAASD,EAAUJ,QAAQO,KAAK,SAACC,GAAuB,OAAAA,EAAEC,MAAQH,EAAVG,MAC9D,OAAIJ,EACFV,KACKU,EACAC,GACHxB,QAAOA,IAGXa,KAAYW,GAAcxB,QAAOA,QAGpCJ,MAAMC,EAAA,GAGL,SAAAgC,EAAwBC,GAC5B,OAAOpC,OAAAC,EAAA,KAAAD,CAAK,uBAAwBoC,GAAMlC,MAAMC,EAAA,GAG5C,SAAAkC,EAA0BD,GAC9B,OAAOpC,OAAAC,EAAA,KAAAD,CAAK,yBAA0BoC,GAAMlC,MAAMC,EAAA,GAG9C,SAAA2B,EAAuBM,GAC3B,OAAOpC,OAAAC,EAAA,KAAAD,CAAK,sBAAuBoC,GAAMlC,MAAMC,EAAA,GAG3C,SAAAmC,IACJ,OAAOtC,OAAAC,EAAA,KAAAD,CAAK,2BAA2BE,MAAMC,EAAA,0BC9K/C,IAAAoC,EAAAC,EAAA,KACAC,EAAAD,EAAA,KACAE,EAAAF,EAAA,KAGAG,EAAAC,KAAAC,IACAC,EAAAF,KAAAG,IAoDAC,EAAAC,QAfA,SAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAA,MAAAH,EAAA,EAAAA,EAAAG,OACA,IAAAA,EACA,SAEA,IAAA5C,EAAA4C,EAAA,EAOA,YANAzC,IAAAwC,IACA3C,EAAAiC,EAAAU,GACA3C,EAAA2C,EAAA,EACAT,EAAAU,EAAA5C,EAAA,GACAqC,EAAArC,EAAA4C,EAAA,IAEAd,EAAAW,EAAAT,EAAAU,EAAA,GAAA1C,GAAA,iGC1Bc,SAAA6C,EAAsBC,GAClC,OAAKA,EAAMC,SAITC,EAAA,qBAAKC,UAAWC,EAAW,eAAgBJ,EAAMG,YAC/CD,EAAA,qBAAKC,UAAU,2BACbD,EAAA,qBACEC,UAAWC,EAAW,uBACpBC,4BAA6BL,EAAMM,YAEpCN,EAAMC,SACND,EAAMM,UAAYJ,EAAA,cAACK,EAAA,GAAaJ,UAAU,eAAeK,QAASR,EAAMM,cAVxE,mXCGXG,EAAA,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAAAD,YACEF,EAAAI,OAAiBC,YAAY,GAE7BL,EAAAM,iBAAmB,SAACC,GAClBA,EAAMC,iBACDR,EAAKI,MAAMC,aACdL,EAAKS,UAAWJ,YAAY,IAC5BvE,OAAA4E,EAAA,EAAA5E,GAAiBsB,KACf,WAAM,OAAAuD,SAASC,SAATC,UACN,WAAM,OAAAb,EAAKS,UAAWJ,YAAhB,UAuCd,OAhDyCS,EAAAhB,EAAAC,GAcvCD,EAAAiB,UAAAC,OAAA,WACU,IAAAX,EAAAH,KAAAE,MAAAC,WACFY,EAASnF,OAAAoF,EAAA,EAAApF,CAAU,yBACzB,OACEyD,EAAA,cAAC4B,EAAA,GAAMC,aAAcH,EAAQI,eAAgBhB,OAAa3D,EAAYwD,KAAKb,MAAMiC,SAC/E/B,EAAA,sBAAMgC,GAAG,eAAeC,SAAUtB,KAAKI,kBACrCf,EAAA,qBAAKC,UAAU,cACbD,EAAA,wBAAK0B,IAEP1B,EAAA,qBAAKC,UAAU,cACbD,EAAA,mBAAGC,UAAWC,EAAW,4BAA8BgC,cAAepB,KACnEvE,OAAAoF,EAAA,EAAApF,CAAUuE,EAAa,uBAAyB,mCAElDA,GACCd,EAAA,mBAAGC,UAAU,4CACXD,EAAA,mBAAGC,UAAU,eAIjBa,GACAd,EAAA,qBAAKC,UAAU,cACbD,EAAA,cAACmC,EAAA,GAAaH,GAAG,yBAAyBzF,OAAAoF,EAAA,EAAApF,CAAU,YACpDyD,EAAA,cAACmC,EAAA,GACClC,UAAU,iBACV+B,GAAG,wBACH1B,QAASK,KAAKb,MAAMiC,SACnBxF,OAAAoF,EAAA,EAAApF,CAAU,eAQ3BgE,EAhDA,CAAyCP,EAAA,sGCDlC,IAAMoC,EAAsB,WAAM,gBAACC,GACxC9F,OAAA+F,EAAA,EAAA/F,GAAoBsB,KAClB,SAAA0E,GACEF,EAPA,SAA4BE,GAChC,OAASC,KAAM,sBAAuBD,QAAOA,GAMhCE,CAAkBF,KAE7B,4cCDJ,SAAA/B,GAAA,SAAAkC,IAAA,IAAAjC,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAAAD,YACEF,EAAAI,OAAiB8B,aAAa,GAE9BlC,EAAAmC,kBAAoB,WAClBnC,EAAKS,UAAWyB,aAAa,KAG/BlC,EAAAoC,kBAAoB,WAClBpC,EAAKS,UAAWyB,aAAa,KAG/BlC,EAAAqC,aAAe,WACbvG,OAAAwB,EAAA,EAAAxB,GAAuBsB,KAAK4C,EAAKX,MAAMiD,eAAgB,iBAyC3D,OArDuDxB,EAAAmB,EAAAlC,GAerDkC,EAAAlB,UAAAC,OAAA,WACQ,IAAA3D,EAAA6C,KAAAb,MAAAyC,QAAES,EAAAlF,EAAAkF,WAAYC,EAAAnF,EAAAmF,SAAUC,EAAApF,EAAAoF,SAE9B,OAD0BF,EAAWpD,QAAUqD,EAASrD,QAAUsD,EAAStD,OAMzEuD,EAAA,cAACtD,EAAA,GAAYI,UAAU,+BACrBkD,EAAA,sBAAMlD,UAAU,uBACdkD,EAAA,cAACC,EAAA,GAAgBC,QAAS9G,OAAA+G,EAAA,EAAA/G,CAAU,sDAGlCqD,OAAQoD,EAAWpD,OAAQ2D,IAAK,kCAChC3D,OAAQqD,EAASrD,OAAQ2D,IAAK,iCAC9B3D,OAAQsD,EAAStD,OAAQ2D,IAAK,oCAE/BnG,OAAO,SAACU,GAAe,OAAbA,EAAA8B,OAAsB,IAChC9C,IAAI,SAACgB,EAAiB0F,OAAf5D,EAAA9B,EAAA8B,OAAQ2D,EAAAzF,EAAAyF,IAAe,OAC7BJ,EAAA,sBAAM3E,IAAK+E,GACRC,EAAM,GAAK,KACZL,EAAA,cAACM,EAAA,GACCC,eAAgBnH,OAAA+G,EAAA,EAAA/G,CAAUgH,GAC1BvB,GAAIuB,EACJI,QAAUC,GAAIT,EAAA,4BAASvD,SAI/BuD,EAAA,cAACU,EAAA,GAAO5D,UAAU,yBAAyBK,QAASK,KAAKiC,mBACtDrG,OAAA+G,EAAA,EAAA/G,CAAU,wBAEb4G,EAAA,cAACU,EAAA,GAAO5D,UAAU,uCAAuCK,QAASK,KAAKmC,cACpEvG,OAAA+G,EAAA,EAAA/G,CAAU,uBAEZoE,KAAKE,MAAM8B,aAAeQ,EAAA,cAAC5C,EAAA,GAAYwB,QAASpB,KAAKkC,qBA9BjD,MAkCbH,EArDA,CAAuDS,EAAA,wWCGvD,SAAA3C,GAAA,SAAAsD,IAAA,IAAArD,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAAAD,YAmCEF,EAAAsD,gBAAkB,SAACjG,OAAEU,EAAAV,EAAAU,IAAKwF,EAAAlG,EAAAkG,KACxB,OACEb,EAAA,oBAAI3E,IAAKA,GACP2E,EAAA,cAACc,EAAA,MAAKC,gBAAgB,SAASC,GAAI,oBAAoB3F,GACpDwF,OA8MX,OArPyCI,EAAAN,EAAAtD,GAKvCsD,EAAAtC,UAAA6C,kBAAA,SAAkBC,GAChB,IAAMC,EAAOC,OAAOnD,SAASoD,SAC7B,OAAOH,EAAKI,KAAK,SAACC,GAAgB,WAAAJ,EAAKhH,QAASiH,OAAeI,QAAUD,MAG3Eb,EAAAtC,UAAAqD,iBAAA,WAOE,OAAOlE,KAAK0D,mBALV,eACA,gBACA,qBACA,iCAKJP,EAAAtC,UAAAsD,iBAAA,WAEE,OAAOnE,KAAK0D,mBADE,6BAA8B,6BAI9CP,EAAAtC,UAAAuD,eAAA,WAEE,OAAOpE,KAAK0D,mBADE,mBAIhBP,EAAAtC,UAAAwD,cAAA,WAEE,OAAOrE,KAAK0D,mBADE,wBAchBP,EAAAtC,UAAAyD,uBAAA,eAAAxE,EAAAE,KACUuE,EAAAvE,KAAAb,MAAAoF,qBACFC,EAA2BxE,KAAKb,MAAMsF,WAAWhI,OACrD,SAAAiI,GAAa,0BAAAA,EAAU7G,MAEzB,OACE2E,EAAA,cAACmC,EAAA,GACCC,QACEpC,EAAA,oBAAIlD,UAAU,QACZkD,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,mBACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,mBAGf4G,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,8BACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,2CAGf4G,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,yBACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,0BAGb2I,GACA/B,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,mBACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,mBAIhB4I,EAAyBrI,IAAI6D,KAAKoD,kBAGvCyB,QAAQ,MACP,SAAC1H,OAAE2H,EAAA3H,EAAA2H,cAAeC,EAAA5H,EAAA4H,KAAW,OAC5BvC,EAAA,mBAAAwC,gBACiBC,OAAOF,GAAKG,gBACb,OACd5F,UAAW6F,EAAW,mBACpBC,OACEL,IACEjF,EAAKoE,qBACJpE,EAAKqE,qBACLrE,EAAKsE,mBACLtE,EAAK4D,mBAAmB,uCACxB5D,EAAKuE,kBAEZgB,KAAK,IACLhE,GAAG,oCACH1B,QAASmF,GACRlJ,OAAA+G,EAAA,EAAA/G,CAAU,4BACX4G,EAAA,cAAC8C,EAAA,GAAahG,UAAU,2BAOlC6D,EAAAtC,UAAA0E,kBAAA,eAAAzF,EAAAE,KACUuE,EAAAvE,KAAAb,MAAAoF,qBACR,OACE/B,EAAA,cAACmC,EAAA,GACCC,QACEpC,EAAA,oBAAIlD,UAAU,SACViF,GACA/B,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,8BACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,gBAIjB4G,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,2BACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,4BAKnBiJ,QAAQ,MACP,SAAC1H,OAAE2H,EAAA3H,EAAA2H,cAAeC,EAAA5H,EAAA4H,KAAW,OAC5BvC,EAAA,mBAAAwC,gBACiBC,OAAOF,GAAKG,gBACb,OACd5F,UAAW6F,EAAW,mBAAqBC,OAAQL,GAAQjF,EAAKqE,qBAChEkB,KAAK,IACL1F,QAASmF,GACRlJ,OAAA+G,EAAA,EAAA/G,CAAU,oBACX4G,EAAA,cAAC8C,EAAA,GAAahG,UAAU,2BAOlC6D,EAAAtC,UAAA2E,kBAAA,eAAA1F,EAAAE,KACUuE,EAAAvE,KAAAb,MAAAoF,qBACR,OACE/B,EAAA,cAACmC,EAAA,GACCC,QACEpC,EAAA,oBAAIlD,UAAU,QACZkD,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,gBACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,iBAGb2I,GACA/B,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,iBACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,uBAIf2I,GACA/B,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,sBACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,8BAIf2I,GACA/B,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,+BACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,2BAMrBiJ,QAAQ,MACP,SAAC1H,OAAE2H,EAAA3H,EAAA2H,cAAeC,EAAA5H,EAAA4H,KAAW,OAC5BvC,EAAA,mBAAAwC,gBACiBC,OAAOF,GAAKG,gBACb,OACd5F,UAAW6F,EAAW,mBAAqBC,OAAQL,GAAQjF,EAAKoE,qBAChEmB,KAAK,IACL1F,QAASmF,GACRlJ,OAAA+G,EAAA,EAAA/G,CAAU,oBACX4G,EAAA,cAAC8C,EAAA,GAAahG,UAAU,2BAOlC6D,EAAAtC,UAAAC,OAAA,WACQ,IAOF2E,EAPEtI,EAAA6C,KAAAb,MAAEsF,EAAAtH,EAAAsH,WAAYiB,EAAAvI,EAAAuI,eACdC,EAAsBlB,EAAW9G,KAAK,SAAA+G,GAAa,0BAAAA,EAAU7G,MAgBnE,OAdE6H,EAAerD,WAAWpD,OAC1ByG,EAAenD,SAAStD,OACxByG,EAAepD,SAASrD,OAGA,IACxBwG,EACEjD,EAAA,cAACoD,GACChE,QAAS8D,EACTtD,eAAgBpC,KAAKb,MAAMsC,uBAM/Be,EAAA,cAACqD,EAAA,GACCC,OAAQL,EAAiBM,EAAA,oBAA4B,GAAKA,EAAA,oBAC1D1E,GAAG,qBACH2E,MAAOP,GACPjD,EAAA,wBAAQlD,UAAU,yBAChBkD,EAAA,wBAAK5G,OAAA+G,EAAA,EAAA/G,CAAU,qBAGjB4G,EAAA,cAACyD,EAAA,EAAU,KACRjG,KAAKsE,yBACLtE,KAAKwF,oBACLxF,KAAKuF,oBAEN/C,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,iBACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,oBAIf4G,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,sBACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,sBAId+J,GACCnD,EAAA,wBACEA,EAAA,cAACc,EAAA,WAAUC,gBAAgB,SAASC,GAAG,oCACpC5H,OAAA+G,EAAA,EAAA/G,CAAU,gBA5OlBuH,EAAA+C,cACLzB,eAmPJtB,EArPA,CAAyCX,EAAA,yWCczC2D,EAAA,SAAAtG,GAAA,SAAAuG,IAAA,IAAAtG,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAAAD,YAaEF,EAAAuG,wBAA0B,WACxB,OAAAzK,OAAA0K,EAAA,EAAA1K,GAAwBsB,KAAK,SAAAqJ,GAAK,OAAAzG,EAAKX,MAAMqH,cAAcD,EAAzB9B,aAAwC,iBA0B9E,OAxC6BgC,EAAAL,EAAAvG,GAK3BuG,EAAAvF,UAAA6F,kBAAA,WACO1G,KAAK2G,QAAQC,SAGhB5G,KAAKqG,0BAFLzK,OAAAiL,EAAA,EAAAjL,IASJwK,EAAAvF,UAAAC,OAAA,WACQ,IAAA3D,EAAA6C,KAAAb,MAAA2H,SAAEC,EAAA5J,EAAA4J,WAAYxC,EAAApH,EAAAoH,qBAGpB,IAAKwC,EACH,OAAO,KAGT,IAAMC,EAAepL,OAAA+G,EAAA,EAAA/G,CAAU,mBAE/B,OACE4G,EAAA,yBACEA,EAAA,cAACyE,EAAAC,GAAOF,aAAcA,EAAcG,cAAe,QAAUH,IAC7DxE,EAAA,cAAC4E,GACC3C,WAAYsC,EACZtF,oBAAqBzB,KAAKb,MAAMsC,oBAChCf,SAAUV,KAAKb,MAAMuB,SACrB6D,qBAAsBA,EACtBmB,eAAgB1F,KAAKb,MAAMuG,iBAE5B1F,KAAKb,MAAMC,WAnCXgH,EAAAiB,cACLT,SAAUU,EAAA,KAAeC,YAsC7BnB,EAxCA,CAA6B5D,EAAA,eA+CvBgF,GACJ/F,oBAAmBgG,EAAA,EACnBjB,cAAakB,EAAA,GAGfC,EAAA,QAAe/L,OAAAgM,EAAA,QAAAhM,CAVS,SAACsE,GAA2B,OAClD4G,SAAUlL,OAAAiM,EAAA,YAAAjM,CAAYsE,GACtBwF,eAAgB9J,OAAAiM,EAAA,6BAAAjM,CAA6BsE,KAQgCsH,EAA/E,CACErB,wBC3GF,IAAA2B,EAAA1J,EAAA,KAmCAQ,EAAAC,QAPA,SAAAkJ,GACA,IAAAC,EAAAF,EAAAC,GACAE,EAAAD,EAAA,EAEA,OAAAA,KAAAC,EAAAD,EAAAC,EAAAD,EAAA,sBCTApJ,EAAAC,QAZA,SAAAC,EAAAC,EAAAC,EAAAkJ,GAIA,IAHA,IAAAjJ,EAAAH,EAAAG,OACA5C,EAAA2C,GAAAkJ,EAAA,MAEAA,EAAA7L,QAAA4C,GACA,GAAAF,EAAAD,EAAAzC,KAAAyC,GACA,OAAAzC,EAGA,gTCYY8L,iBAsCN,SAAAC,EAAsBC,GAC1B,OAAOzM,OAAA0M,EAAA,KAAA1M,CAAK,gCAAkCyM,MAAKA,IAAIvM,MAAMyM,EAAA,GAGzD,SAAAC,IACJ,OAAO5M,OAAA0M,EAAA,QAAA1M,CAAQ,oBAAoBE,MAAMyM,EAAA,GAGrC,SAAAE,IACJ,OAAO7M,OAAA0M,EAAA,QAAA1M,CAAQ,sBAGX,SAAA8M,IAIJ,OAAO9M,OAAA0M,EAAA,QAAA1M,CAAQ,wBAGX,SAAA+M,IAKJ,OAAO/M,OAAA0M,EAAA,QAAA1M,CAAQ,mCAGX,SAAAgN,IAKJ,OAAOhN,OAAA0M,EAAA,SAAA1M,CAAS,2BAtElB,SAAYuM,GACVA,EAAA,UACAA,EAAA,gBACAA,EAAA,cAHF,CAAYA,WA6EZ,IAAMU,EAAmB,IAgBzB,SAAAC,IACE,OAAO,IAAIxL,QAAQ,SAAAyL,GAAW,OAfhC,SAAAC,EAAoBC,GAClBC,WAAW,WACTT,IACGvL,KAAK,SAAAqJ,GACa,OAAbA,EAAEnK,OACJ6M,IAEAD,EAAWC,KAGdnN,MAAM,WAAM,OAAAkN,EAAAC,MACdJ,GAI2BG,CAAAD,KAG1B,SAAAI,IACJ,OAxBOvN,OAAA0M,EAAA,KAAA1M,CAAK,uBAAuBE,MAAMyM,EAAA,GAwBxBrL,KAAK4L,oEC1GxBnB,EAAA,aACE,IAAMyB,EAAQxN,OAAAyN,EAAA,QAAAzN,GACR0N,EAAU1N,OAAA2N,EAAA,EAAA3N,GAEV4N,EAAW3F,OAAOnD,SAASoD,SAAWD,OAAOnD,SAAS+I,OAAS5F,OAAOnD,SAASgJ,KAErFN,EAAM1H,SAAS9F,OAAA+N,EAAA,EAAA/N,IACf0N,EAAQM,SACN9F,SAAU,gBACV+F,OAASC,UAAWN","file":"js/324.bd24c3e6.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { findLastIndex } from 'lodash';\nimport { getJSON, post } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface Plugin {\n  key: string;\n  name: string;\n  category?: string;\n  description?: string;\n  editionBundled?: boolean;\n  license?: string;\n  organizationName?: string;\n  homepageUrl?: string;\n  organizationUrl?: string;\n  issueTrackerUrl?: string;\n  termsAndConditionsUrl?: string;\n}\n\nexport interface Release {\n  version: string;\n  date: string;\n  description?: string;\n  changeLogUrl?: string;\n}\n\nexport interface Update {\n  status: string;\n  release?: Release;\n  requires: Plugin[];\n  previousUpdates?: Update[];\n}\n\nexport interface PluginPendingResult {\n  installing: PluginPending[];\n  updating: PluginPending[];\n  removing: PluginPending[];\n}\n\nexport interface PluginAvailable extends Plugin {\n  release: Release;\n  update: Update;\n}\n\nexport interface PluginPending extends Plugin {\n  version: string;\n  implementationBuild: string;\n}\n\nexport interface PluginInstalled extends PluginPending {\n  filename: string;\n  hash: string;\n  sonarLintSupported: boolean;\n  updatedAt: number;\n  updates?: Update[];\n}\n\nexport function getAvailablePlugins(): Promise<{\n  plugins: PluginAvailable[];\n  updateCenterRefresh: string;\n}> {\n  return getJSON('/api/plugins/available').catch(throwGlobalError);\n}\n\nexport function getPendingPlugins(): Promise<PluginPendingResult> {\n  return getJSON('/api/plugins/pending').catch(throwGlobalError);\n}\n\nfunction getLastUpdates(updates: undefined | Update[]): Update[] {\n  if (!updates) {\n    return [];\n  }\n  const lastUpdate = ['COMPATIBLE', 'REQUIRES_SYSTEM_UPGRADE', 'DEPS_REQUIRE_SYSTEM_UPGRADE'].map(\n    status => {\n      const index = findLastIndex(updates, update => update.status === status);\n      return index > -1 ? updates[index] : undefined;\n    }\n  );\n  return lastUpdate.filter(Boolean) as Update[];\n}\n\nfunction addChangelog(update: Update, updates?: Update[]) {\n  if (!updates) {\n    return update;\n  }\n  const index = updates.indexOf(update);\n  const previousUpdates = index > 0 ? updates.slice(0, index) : [];\n  return { ...update, previousUpdates };\n}\n\nexport function getInstalledPlugins(): Promise<PluginInstalled[]> {\n  return getJSON('/api/plugins/installed', { f: 'category' }).then(\n    ({ plugins }) => plugins,\n    throwGlobalError\n  );\n}\n\nexport function getInstalledPluginsWithUpdates(): Promise<PluginInstalled[]> {\n  return Promise.all([\n    getJSON('/api/plugins/installed', { f: 'category' }),\n    getJSON('/api/plugins/updates')\n  ])\n    .then(([installed, updates]) =>\n      installed.plugins.map((plugin: PluginInstalled) => {\n        const updatePlugin: PluginInstalled = updates.plugins.find(\n          (p: PluginInstalled) => p.key === plugin.key\n        );\n        if (updatePlugin) {\n          return {\n            ...updatePlugin,\n            ...plugin,\n            updates: getLastUpdates(updatePlugin.updates).map(update =>\n              addChangelog(update, updatePlugin.updates)\n            )\n          };\n        }\n        return plugin;\n      })\n    )\n    .catch(throwGlobalError);\n}\n\nexport function getPluginUpdates(): Promise<PluginInstalled[]> {\n  return Promise.all([getJSON('/api/plugins/updates'), getJSON('/api/plugins/installed')])\n    .then(([updates, installed]) =>\n      updates.plugins.map((updatePlugin: PluginInstalled) => {\n        const updates = getLastUpdates(updatePlugin.updates).map(update =>\n          addChangelog(update, updatePlugin.updates)\n        );\n        const plugin = installed.plugins.find((p: PluginInstalled) => p.key === updatePlugin.key);\n        if (plugin) {\n          return {\n            ...plugin,\n            ...updatePlugin,\n            updates\n          };\n        }\n        return { ...updatePlugin, updates };\n      })\n    )\n    .catch(throwGlobalError);\n}\n\nexport function installPlugin(data: { key: string }): Promise<void | Response> {\n  return post('/api/plugins/install', data).catch(throwGlobalError);\n}\n\nexport function uninstallPlugin(data: { key: string }): Promise<void | Response> {\n  return post('/api/plugins/uninstall', data).catch(throwGlobalError);\n}\n\nexport function updatePlugin(data: { key: string }): Promise<void | Response> {\n  return post('/api/plugins/update', data).catch(throwGlobalError);\n}\n\nexport function cancelPendingPlugins(): Promise<void | Response> {\n  return post('/api/plugins/cancel_all').catch(throwGlobalError);\n}\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * This method is like `_.findIndex` except that it iterates over elements\n * of `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n * // => 2\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n * // => 0\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastIndex(users, ['active', false]);\n * // => 2\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastIndex(users, 'active');\n * // => 0\n */\nfunction findLastIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = length - 1;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = fromIndex < 0\n      ? nativeMax(length + index, 0)\n      : nativeMin(index, length - 1);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);\n}\n\nmodule.exports = findLastIndex;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { DeleteButton } from '../ui/buttons';\n\ninterface Props {\n  children?: React.ReactNode;\n  className?: string;\n  onCancel?: () => {};\n}\n\nexport default function NavBarNotif(props: Props) {\n  if (!props.children) {\n    return null;\n  }\n  return (\n    <div className={classNames('navbar-notif', props.className)}>\n      <div className=\"navbar-limited clearfix\">\n        <div\n          className={classNames('display-flex-center', {\n            'navbar-notif-cancelable': !!props.onCancel\n          })}>\n          {props.children}\n          {props.onCancel && <DeleteButton className=\"button-small\" onClick={props.onCancel} />}\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { restartAndWait } from '../../api/system';\nimport Modal from '../../components/controls/Modal';\nimport { SubmitButton, ResetButtonLink } from '../ui/buttons';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  onClose: () => void;\n}\n\ninterface State {\n  restarting: boolean;\n}\n\nexport default class RestartForm extends React.PureComponent<Props, State> {\n  state: State = { restarting: false };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    if (!this.state.restarting) {\n      this.setState({ restarting: true });\n      restartAndWait().then(\n        () => document.location.reload(),\n        () => this.setState({ restarting: false })\n      );\n    }\n  };\n\n  render() {\n    const { restarting } = this.state;\n    const header = translate('system.restart_server');\n    return (\n      <Modal contentLabel={header} onRequestClose={restarting ? undefined : this.props.onClose}>\n        <form id=\"restart-form\" onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{header}</h2>\n          </div>\n          <div className=\"modal-body\">\n            <p className={classNames('spacer-top spacer-bottom', { 'text-center': restarting })}>\n              {translate(restarting ? 'system.is_restarting' : 'system.are_you_sure_to_restart')}\n            </p>\n            {restarting && (\n              <p className=\"big-spacer-top spacer-bottom text-center\">\n                <i className=\"spinner\" />\n              </p>\n            )}\n          </div>\n          {!restarting && (\n            <div className=\"modal-foot\">\n              <SubmitButton id=\"restart-server-submit\">{translate('restart')}</SubmitButton>\n              <ResetButtonLink\n                className=\"js-modal-close\"\n                id=\"restart-server-cancel\"\n                onClick={this.props.onClose}>\n                {translate('cancel')}\n              </ResetButtonLink>\n            </div>\n          )}\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Dispatch } from 'react-redux';\nimport { getPendingPlugins, PluginPendingResult } from '../../api/plugins';\n\ninterface SetPendingPluginsAction {\n  type: 'SET_PENDING_PLUGINS';\n  pending: PluginPendingResult;\n}\n\nexport type Action = SetPendingPluginsAction;\n\nexport function setPendingPlugins(pending: PluginPendingResult): SetPendingPluginsAction {\n  return { type: 'SET_PENDING_PLUGINS', pending };\n}\n\nexport const fetchPendingPlugins = () => (dispatch: Dispatch<Action>) => {\n  getPendingPlugins().then(\n    pending => {\n      dispatch(setPendingPlugins(pending));\n    },\n    () => {}\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport InstanceMessage from '../../../../components/common/InstanceMessage';\nimport NavBarNotif from '../../../../components/nav/NavBarNotif';\nimport RestartForm from '../../../../components/common/RestartForm';\nimport { cancelPendingPlugins, PluginPendingResult } from '../../../../api/plugins';\nimport { Button } from '../../../../components/ui/buttons';\nimport { translate } from '../../../../helpers/l10n';\n\ninterface Props {\n  pending: PluginPendingResult;\n  refreshPending: () => void;\n}\n\ninterface State {\n  openRestart: boolean;\n}\n\nexport default class PendingPluginsActionNotif extends React.PureComponent<Props, State> {\n  state: State = { openRestart: false };\n\n  handleOpenRestart = () => {\n    this.setState({ openRestart: true });\n  };\n\n  hanleCloseRestart = () => {\n    this.setState({ openRestart: false });\n  };\n\n  handleRevert = () => {\n    cancelPendingPlugins().then(this.props.refreshPending, () => {});\n  };\n\n  render() {\n    const { installing, updating, removing } = this.props.pending;\n    const hasPendingActions = installing.length || updating.length || removing.length;\n    if (!hasPendingActions) {\n      return null;\n    }\n\n    return (\n      <NavBarNotif className=\"alert alert-info js-pending\">\n        <span className=\"little-spacer-right\">\n          <InstanceMessage message={translate('marketplace.instance_needs_to_be_restarted_to')} />\n        </span>\n        {[\n          { length: installing.length, msg: 'marketplace.install_x_plugins' },\n          { length: updating.length, msg: 'marketplace.update_x_plugins' },\n          { length: removing.length, msg: 'marketplace.uninstall_x_plugins' }\n        ]\n          .filter(({ length }) => length > 0)\n          .map(({ length, msg }, idx) => (\n            <span key={msg}>\n              {idx > 0 && '; '}\n              <FormattedMessage\n                defaultMessage={translate(msg)}\n                id={msg}\n                values={{ nb: <strong>{length}</strong> }}\n              />\n            </span>\n          ))}\n        <Button className=\"spacer-left js-restart\" onClick={this.handleOpenRestart}>\n          {translate('marketplace.restart')}\n        </Button>\n        <Button className=\"spacer-left js-cancel-all button-red\" onClick={this.handleRevert}>\n          {translate('marketplace.revert')}\n        </Button>\n        {this.state.openRestart && <RestartForm onClose={this.hanleCloseRestart} />}\n      </NavBarNotif>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { IndexLink, Link } from 'react-router';\nimport PendingPluginsActionNotif from './PendingPluginsActionNotif';\nimport * as theme from '../../../../app/theme';\nimport ContextNavBar from '../../../../components/nav/ContextNavBar';\nimport Dropdown from '../../../../components/controls/Dropdown';\nimport NavBarTabs from '../../../../components/nav/NavBarTabs';\nimport { Extension } from '../../../types';\nimport { PluginPendingResult } from '../../../../api/plugins';\nimport DropdownIcon from '../../../../components/icons-components/DropdownIcon';\nimport { translate } from '../../../../helpers/l10n';\n\ninterface Props {\n  extensions: Extension[];\n  fetchPendingPlugins: () => void;\n  location: {};\n  organizationsEnabled: boolean;\n  pendingPlugins: PluginPendingResult;\n}\n\nexport default class SettingsNav extends React.PureComponent<Props> {\n  static defaultProps = {\n    extensions: []\n  };\n\n  isSomethingActive(urls: string[]): boolean {\n    const path = window.location.pathname;\n    return urls.some((url: string) => path.indexOf((window as any).baseUrl + url) === 0);\n  }\n\n  isSecurityActive() {\n    const urls = [\n      '/admin/users',\n      '/admin/groups',\n      '/admin/permissions',\n      '/admin/permission_templates'\n    ];\n    return this.isSomethingActive(urls);\n  }\n\n  isProjectsActive() {\n    const urls = ['/admin/projects_management', '/admin/background_tasks'];\n    return this.isSomethingActive(urls);\n  }\n\n  isSystemActive() {\n    const urls = ['/admin/system'];\n    return this.isSomethingActive(urls);\n  }\n\n  isMarketplace() {\n    const urls = ['/admin/marketplace'];\n    return this.isSomethingActive(urls);\n  }\n\n  renderExtension = ({ key, name }: Extension) => {\n    return (\n      <li key={key}>\n        <Link activeClassName=\"active\" to={`/admin/extension/${key}`}>\n          {name}\n        </Link>\n      </li>\n    );\n  };\n\n  renderConfigurationTab() {\n    const { organizationsEnabled } = this.props;\n    const extensionsWithoutSupport = this.props.extensions.filter(\n      extension => extension.key !== 'license/support'\n    );\n    return (\n      <Dropdown\n        overlay={\n          <ul className=\"menu\">\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/settings\">\n                {translate('settings.page')}\n              </IndexLink>\n            </li>\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/settings/encryption\">\n                {translate('property.category.security.encryption')}\n              </IndexLink>\n            </li>\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/custom_metrics\">\n                {translate('custom_metrics.page')}\n              </IndexLink>\n            </li>\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/webhooks\">\n                  {translate('webhooks.page')}\n                </IndexLink>\n              </li>\n            )}\n            {extensionsWithoutSupport.map(this.renderExtension)}\n          </ul>\n        }\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={String(open)}\n            aria-haspopup=\"true\"\n            className={classNames('dropdown-toggle', {\n              active:\n                open ||\n                (!this.isSecurityActive() &&\n                  !this.isProjectsActive() &&\n                  !this.isSystemActive() &&\n                  !this.isSomethingActive(['/admin/extension/license/support']) &&\n                  !this.isMarketplace())\n            })}\n            href=\"#\"\n            id=\"settings-navigation-configuration\"\n            onClick={onToggleClick}>\n            {translate('sidebar.project_settings')}\n            <DropdownIcon className=\"little-spacer-left\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  renderProjectsTab() {\n    const { organizationsEnabled } = this.props;\n    return (\n      <Dropdown\n        overlay={\n          <ul className=\"menu\">\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/projects_management\">\n                  {translate('management')}\n                </IndexLink>\n              </li>\n            )}\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/background_tasks\">\n                {translate('background_tasks.page')}\n              </IndexLink>\n            </li>\n          </ul>\n        }\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={String(open)}\n            aria-haspopup=\"true\"\n            className={classNames('dropdown-toggle', { active: open || this.isProjectsActive() })}\n            href=\"#\"\n            onClick={onToggleClick}>\n            {translate('sidebar.projects')}\n            <DropdownIcon className=\"little-spacer-left\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  renderSecurityTab() {\n    const { organizationsEnabled } = this.props;\n    return (\n      <Dropdown\n        overlay={\n          <ul className=\"menu\">\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/users\">\n                {translate('users.page')}\n              </IndexLink>\n            </li>\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/groups\">\n                  {translate('user_groups.page')}\n                </IndexLink>\n              </li>\n            )}\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/permissions\">\n                  {translate('global_permissions.page')}\n                </IndexLink>\n              </li>\n            )}\n            {!organizationsEnabled && (\n              <li>\n                <IndexLink activeClassName=\"active\" to=\"/admin/permission_templates\">\n                  {translate('permission_templates')}\n                </IndexLink>\n              </li>\n            )}\n          </ul>\n        }\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={String(open)}\n            aria-haspopup=\"true\"\n            className={classNames('dropdown-toggle', { active: open || this.isSecurityActive() })}\n            href=\"#\"\n            onClick={onToggleClick}>\n            {translate('sidebar.security')}\n            <DropdownIcon className=\"little-spacer-left\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  render() {\n    const { extensions, pendingPlugins } = this.props;\n    const hasSupportExtension = extensions.find(extension => extension.key === 'license/support');\n    const totalPendingPlugins =\n      pendingPlugins.installing.length +\n      pendingPlugins.removing.length +\n      pendingPlugins.updating.length;\n\n    let notifComponent;\n    if (totalPendingPlugins > 0) {\n      notifComponent = (\n        <PendingPluginsActionNotif\n          pending={pendingPlugins}\n          refreshPending={this.props.fetchPendingPlugins}\n        />\n      );\n    }\n\n    return (\n      <ContextNavBar\n        height={notifComponent ? theme.contextNavHeightRaw + 30 : theme.contextNavHeightRaw}\n        id=\"context-navigation\"\n        notif={notifComponent}>\n        <header className=\"navbar-context-header\">\n          <h1>{translate('layout.settings')}</h1>\n        </header>\n\n        <NavBarTabs>\n          {this.renderConfigurationTab()}\n          {this.renderSecurityTab()}\n          {this.renderProjectsTab()}\n\n          <li>\n            <IndexLink activeClassName=\"active\" to=\"/admin/system\">\n              {translate('sidebar.system')}\n            </IndexLink>\n          </li>\n\n          <li>\n            <IndexLink activeClassName=\"active\" to=\"/admin/marketplace\">\n              {translate('marketplace.page')}\n            </IndexLink>\n          </li>\n\n          {hasSupportExtension && (\n            <li>\n              <IndexLink activeClassName=\"active\" to=\"/admin/extension/license/support\">\n                {translate('support')}\n              </IndexLink>\n            </li>\n          )}\n        </NavBarTabs>\n      </ContextNavBar>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Helmet from 'react-helmet';\nimport { connect } from 'react-redux';\nimport SettingsNav from './nav/settings/SettingsNav';\nimport { getAppState, getMarketplacePendingPlugins } from '../../store/rootReducer';\nimport { getSettingsNavigation } from '../../api/nav';\nimport { setAdminPages } from '../../store/appState/duck';\nimport { fetchPendingPlugins } from '../../store/marketplace/actions';\nimport { translate } from '../../helpers/l10n';\nimport { Extension } from '../types';\nimport { PluginPendingResult } from '../../api/plugins';\nimport handleRequiredAuthorization from '../utils/handleRequiredAuthorization';\n\ninterface StateProps {\n  appState: {\n    adminPages: Extension[];\n    edition: string;\n    organizationsEnabled: boolean;\n    version: string;\n  };\n  pendingPlugins: PluginPendingResult;\n}\n\ninterface DispatchToProps {\n  fetchPendingPlugins: () => void;\n  setAdminPages: (adminPages: Extension[]) => void;\n}\n\ninterface OwnProps {\n  location: {};\n}\n\ntype Props = StateProps & DispatchToProps & OwnProps;\n\nclass AdminContainer extends React.PureComponent<Props> {\n  static contextTypes = {\n    canAdmin: PropTypes.bool.isRequired\n  };\n\n  componentDidMount() {\n    if (!this.context.canAdmin) {\n      handleRequiredAuthorization();\n    } else {\n      this.fetchNavigationSettings();\n    }\n  }\n\n  fetchNavigationSettings = () =>\n    getSettingsNavigation().then(r => this.props.setAdminPages(r.extensions), () => {});\n\n  render() {\n    const { adminPages, organizationsEnabled } = this.props.appState;\n\n    // Check that the adminPages are loaded\n    if (!adminPages) {\n      return null;\n    }\n\n    const defaultTitle = translate('layout.settings');\n\n    return (\n      <div>\n        <Helmet defaultTitle={defaultTitle} titleTemplate={'%s - ' + defaultTitle} />\n        <SettingsNav\n          extensions={adminPages}\n          fetchPendingPlugins={this.props.fetchPendingPlugins}\n          location={this.props.location}\n          organizationsEnabled={organizationsEnabled}\n          pendingPlugins={this.props.pendingPlugins}\n        />\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any): StateProps => ({\n  appState: getAppState(state),\n  pendingPlugins: getMarketplacePendingPlugins(state)\n});\n\nconst mapDispatchToProps: DispatchToProps = {\n  fetchPendingPlugins,\n  setAdminPages\n};\n\nexport default connect<StateProps, DispatchToProps, OwnProps>(mapStateToProps, mapDispatchToProps)(\n  AdminContainer\n);\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport type SysValue = boolean | string | number | HealthType | SysValueObject | SysValueArray;\nexport interface SysValueObject {\n  [key: string]: SysValue;\n}\nexport interface SysValueArray extends Array<SysValue> {}\n\nexport interface SysInfoSection {\n  [sectionName: string]: SysValueObject;\n}\n\nexport enum HealthType {\n  RED = 'RED',\n  YELLOW = 'YELLOW',\n  GREEN = 'GREEN'\n}\n\nexport interface NodeInfo extends SysValueObject {\n  'Compute Engine Logging': { 'Logs Level': string };\n  Health: HealthType;\n  'Health Causes': string[];\n  Name: string;\n  'Web Logging': { 'Logs Level': string };\n}\n\nexport interface SysInfo extends SysValueObject {\n  Health: HealthType;\n  'Health Causes': string[];\n  System: {\n    'High Availability': boolean;\n    'Logs Level': string;\n    'Server ID': string;\n  };\n}\n\nexport interface ClusterSysInfo extends SysInfo {\n  'Application Nodes': NodeInfo[];\n  'Search Nodes': NodeInfo[];\n}\n\nexport interface SystemUpgrade {\n  version: string;\n  description: string;\n  releaseDate: string;\n  changeLogUrl: string;\n  downloadUrl: string;\n  plugins: any;\n}\n\nexport function setLogLevel(level: string): Promise<void | Response> {\n  return post('/api/system/change_log_level', { level }).catch(throwGlobalError);\n}\n\nexport function getSystemInfo(): Promise<SysInfo> {\n  return getJSON('/api/system/info').catch(throwGlobalError);\n}\n\nexport function getSystemStatus(): Promise<{ id: string; version: string; status: string }> {\n  return getJSON('/api/system/status');\n}\n\nexport function getSystemUpgrades(): Promise<{\n  upgrades: SystemUpgrade[];\n  updateCenterRefresh: string;\n}> {\n  return getJSON('/api/system/upgrades');\n}\n\nexport function getMigrationStatus(): Promise<{\n  message?: string;\n  startedAt?: string;\n  state: string;\n}> {\n  return getJSON('/api/system/db_migration_status');\n}\n\nexport function migrateDatabase(): Promise<{\n  message?: string;\n  startedAt?: string;\n  state: string;\n}> {\n  return postJSON('/api/system/migrate_db');\n}\n\nexport function restart(): Promise<void | Response> {\n  return post('/api/system/restart').catch(throwGlobalError);\n}\n\nconst POLLING_INTERVAL = 2000;\n\nfunction pollStatus(cb: Function): void {\n  setTimeout(() => {\n    getSystemStatus()\n      .then(r => {\n        if (r.status === 'UP') {\n          cb();\n        } else {\n          pollStatus(cb);\n        }\n      })\n      .catch(() => pollStatus(cb));\n  }, POLLING_INTERVAL);\n}\n\nfunction promiseStatus(): Promise<any> {\n  return new Promise(resolve => pollStatus(resolve));\n}\n\nexport function restartAndWait(): Promise<any> {\n  return restart().then(promiseStatus);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport getStore from './getStore';\nimport getHistory from './getHistory';\nimport { requireAuthorization } from '../../store/appState/duck';\n\nexport default () => {\n  const store = getStore();\n  const history = getHistory();\n\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n\n  store.dispatch(requireAuthorization());\n  history.replace({\n    pathname: '/sessions/new',\n    query: { return_to: returnTo }\n  });\n};\n"],"sourceRoot":""}