{"version":3,"sources":["webpack:///./src/main/js/apps/permissions/shared/components/PageError.tsx","webpack:///./src/main/js/apps/permissions/global/components/PageHeader.js","webpack:///./src/main/js/apps/permissions/global/components/AllHoldersList.tsx","webpack:///./src/main/js/apps/permissions/global/store/actions.js","webpack:///./src/main/js/apps/permissions/global/components/AllHoldersListContainer.tsx","webpack:///./src/main/js/apps/permissions/global/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/apps/organizations/forSingleOrganization.tsx"],"names":["__webpack_exports__","Object","react_redux__WEBPACK_IMPORTED_MODULE_1__","state","message","_store_rootReducer__WEBPACK_IMPORTED_MODULE_2__","_a","react__WEBPACK_IMPORTED_MODULE_0__","className","PageHeader_PageHeader","_super","PageHeader","__extends","prototype","render","title","this","props","organization","l10n","description","index_js_exposed_default","a","createElement","loading","defaultProps","PureComponent","components_PageHeader","es","rootReducer","PERMISSIONS_ORDER","AllHoldersList","_this","apply","arguments","handleToggleUser","user","permission","permissions","includes","revokePermissionFromUser","login","grantPermissionToUser","handleToggleGroup","group","revokePermissionFromGroup","name","grantPermissionToGroup","AllHoldersList_extends","componentDidMount","loadHolders","l10nPrefix","map","p","key","index_js_exposed","HoldersList","groups","onSelectPermission","onToggleGroup","onToggleUser","selectedPermission","users","SearchForm","filter","onFilter","onSearch","query","actions_loadHolders","dispatch","getState","type","actions","requests","push","api_permissions","Promise","resolve","all","then","responses","catch","e","request","AllHoldersListContainer","ownProps","organizationKey","undefined","groupName","actions_grantToGroup","actions_grantToUser","actions_updateFilter","actions_updateQuery","actions_selectPermission","actions_revokeFromGroup","actions_revokeFromUser","components_AllHoldersList","forSingleOrganization","Suggestions","suggestions","Helmet_default","PageError","context","addSuggestions","componentDidUpdate","prevProps","removeSuggestions","componentWillUnmount","contextTypes","prop_types__WEBPACK_IMPORTED_MODULE_1__","isRequired","ComposedComponent","ForSingleOrganization","customOrganizations","router","other","__rest","params","replace","__assign","displayName","_store_rootReducer__WEBPACK_IMPORTED_MODULE_3__","react_router__WEBPACK_IMPORTED_MODULE_2__"],"mappings":"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","file":"js/253.34e5eb0c.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getPermissionsAppError } from '../../../../store/rootReducer';\n\ninterface Props {\n  message: string;\n}\n\nfunction PageError({ message }: Props) {\n  if (!message) {\n    return null;\n  }\n\n  return <div className=\"alert alert-danger\">{message}</div>;\n}\n\nconst mapStateToProps = (state: any) => ({\n  message: getPermissionsAppError(state)\n});\n\nexport default connect(mapStateToProps)(PageError);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { translate } from '../../../../helpers/l10n';\nimport { isPermissionsAppLoading } from '../../../../store/rootReducer';\n\nclass PageHeader extends React.PureComponent {\n  /*:: props: {\n    loading?: boolean,\n    organization?: {}\n  };\n*/\n\n  static defaultProps = {\n    loading: false\n  };\n\n  render() {\n    const title = this.props.organization\n      ? translate('permissions.page')\n      : translate('global_permissions.page');\n\n    const description = this.props.organization\n      ? translate('organization_permissions.page.description')\n      : translate('global_permissions.page.description');\n\n    return (\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{title}</h1>\n\n        {this.props.loading && <i className=\"spinner\" />}\n\n        <div className=\"page-description\">{description}</div>\n      </header>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  loading: isPermissionsAppLoading(state)\n});\n\nexport default connect(mapStateToProps)(PageHeader);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SearchForm from '../../shared/components/SearchForm';\nimport HoldersList from '../../shared/components/HoldersList';\nimport { translate } from '../../../../helpers/l10n';\nimport { Organization } from '../../../../app/types';\nimport { PermissionUser, PermissionGroup } from '../../../../api/permissions';\n\nconst PERMISSIONS_ORDER = ['admin', 'profileadmin', 'gateadmin', 'scan', 'provisioning'];\n\ninterface Props {\n  filter: string;\n  grantPermissionToGroup: (groupName: string, permission: string) => Promise<void>;\n  grantPermissionToUser: (login: string, permission: string) => Promise<void>;\n  groups: PermissionGroup[];\n  loadHolders: () => void;\n  onFilter: (filter: string) => void;\n  onSearch: (query: string) => void;\n  onSelectPermission: (permission: string) => void;\n  organization?: Organization;\n  query: string;\n  revokePermissionFromGroup: (groupName: string, permission: string) => Promise<void>;\n  revokePermissionFromUser: (login: string, permission: string) => Promise<void>;\n  selectedPermission?: string;\n  users: PermissionUser[];\n}\n\nexport default class AllHoldersList extends React.PureComponent<Props> {\n  componentDidMount() {\n    this.props.loadHolders();\n  }\n\n  handleToggleUser = (user: PermissionUser, permission: string) => {\n    const hasPermission = user.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromUser(user.login, permission);\n    } else {\n      return this.props.grantPermissionToUser(user.login, permission);\n    }\n  };\n\n  handleToggleGroup = (group: PermissionGroup, permission: string) => {\n    const hasPermission = group.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromGroup(group.name, permission);\n    } else {\n      return this.props.grantPermissionToGroup(group.name, permission);\n    }\n  };\n\n  render() {\n    const l10nPrefix = this.props.organization ? 'organizations_permissions' : 'global_permissions';\n    const permissions = PERMISSIONS_ORDER.map(p => ({\n      key: p,\n      name: translate(l10nPrefix, p),\n      description: translate(l10nPrefix, p, 'desc')\n    }));\n\n    return (\n      <HoldersList\n        groups={this.props.groups}\n        onSelectPermission={this.props.onSelectPermission}\n        onToggleGroup={this.handleToggleGroup}\n        onToggleUser={this.handleToggleUser}\n        permissions={permissions}\n        selectedPermission={this.props.selectedPermission}\n        users={this.props.users}>\n        <SearchForm\n          filter={this.props.filter}\n          onFilter={this.props.onFilter}\n          onSearch={this.props.onSearch}\n          query={this.props.query}\n        />\n      </HoldersList>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport * as api from '../../../../api/permissions';\nimport { parseError } from '../../../../helpers/request';\nimport {\n  raiseError,\n  REQUEST_HOLDERS,\n  RECEIVE_HOLDERS_SUCCESS,\n  UPDATE_QUERY,\n  UPDATE_FILTER,\n  SELECT_PERMISSION,\n  GRANT_PERMISSION_TO_USER,\n  REVOKE_PERMISSION_TO_USER,\n  GRANT_PERMISSION_TO_GROUP,\n  REVOKE_PERMISSION_FROM_GROUP\n} from '../../shared/store/actions';\nimport {\n  getPermissionsAppQuery,\n  getPermissionsAppFilter,\n  getPermissionsAppSelectedPermission\n} from '../../../../store/rootReducer';\n\n/*::\ntype Dispatch = Object => void;\n*/\n/*::\ntype GetState = () => Object;\n*/\n\nexport const loadHolders = (organization /*: ?string */) => (\n  dispatch /*: Dispatch */,\n  getState /*: GetState */\n) => {\n  const query = getPermissionsAppQuery(getState());\n  const filter = getPermissionsAppFilter(getState());\n  const selectedPermission = getPermissionsAppSelectedPermission(getState());\n\n  dispatch({ type: REQUEST_HOLDERS, query });\n\n  const requests = [];\n\n  if (filter !== 'groups') {\n    requests.push(api.getGlobalPermissionsUsers(query, selectedPermission, organization));\n  } else {\n    requests.push(Promise.resolve([]));\n  }\n\n  if (filter !== 'users') {\n    requests.push(api.getGlobalPermissionsGroups(query, selectedPermission, organization));\n  } else {\n    requests.push(Promise.resolve([]));\n  }\n\n  return Promise.all(requests)\n    .then(responses =>\n      dispatch({\n        type: RECEIVE_HOLDERS_SUCCESS,\n        users: responses[0],\n        groups: responses[1],\n        query\n      })\n    )\n    .catch(e => {\n      return parseError(e).then(message => dispatch(raiseError(message)));\n    });\n};\n\nexport const updateQuery = (query /*: string */ = '', organization /*: ?string */) => (\n  dispatch /*: Dispatch */\n) => {\n  dispatch({ type: UPDATE_QUERY, query });\n  dispatch(loadHolders(organization));\n};\n\nexport const updateFilter = (filter /*: string */, organization /*: ?string */) => (\n  dispatch /*: Dispatch */\n) => {\n  dispatch({ type: UPDATE_FILTER, filter });\n  dispatch(loadHolders(organization));\n};\n\nexport const selectPermission = (permission /*: string */, organization /*: ?string */) => (\n  dispatch /*: Dispatch */,\n  getState /*: GetState */\n) => {\n  const selectedPermission = getPermissionsAppSelectedPermission(getState());\n  if (selectedPermission !== permission) {\n    dispatch({ type: SELECT_PERMISSION, permission });\n  } else {\n    dispatch({ type: SELECT_PERMISSION, permission: null });\n  }\n  dispatch(loadHolders(organization));\n};\n\nexport const grantToUser = (\n  login /*: string */,\n  permission /*: string */,\n  organization /*: ?string */\n) => (dispatch /*: Dispatch */) => {\n  return api\n    .grantPermissionToUser(null, login, permission, organization)\n    .then(() => {\n      dispatch({ type: GRANT_PERMISSION_TO_USER, login, permission });\n    })\n    .catch(e => {\n      return parseError(e).then(message => dispatch(raiseError(message)));\n    });\n};\n\nexport const revokeFromUser = (\n  login /*: string */,\n  permission /*: string */,\n  organization /*: ?string */\n) => (dispatch /*: Dispatch */) => {\n  return api\n    .revokePermissionFromUser(null, login, permission, organization)\n    .then(() => {\n      dispatch({ type: REVOKE_PERMISSION_TO_USER, login, permission });\n    })\n    .catch(e => {\n      return parseError(e).then(message => dispatch(raiseError(message)));\n    });\n};\n\nexport const grantToGroup = (\n  groupName /*: string */,\n  permission /*: string */,\n  organization /*: ?string */\n) => (dispatch /*: Dispatch */) => {\n  return api\n    .grantPermissionToGroup(null, groupName, permission, organization)\n    .then(() => {\n      dispatch({\n        type: GRANT_PERMISSION_TO_GROUP,\n        groupName,\n        permission\n      });\n    })\n    .catch(e => {\n      return parseError(e).then(message => dispatch(raiseError(message)));\n    });\n};\n\nexport const revokeFromGroup = (\n  groupName /*: string */,\n  permission /*: string */,\n  organization /*: ?string */\n) => (dispatch /*: Dispatch */) => {\n  return api\n    .revokePermissionFromGroup(null, groupName, permission, organization)\n    .then(() => {\n      dispatch({\n        type: REVOKE_PERMISSION_FROM_GROUP,\n        groupName,\n        permission\n      });\n    })\n    .catch(e => {\n      return parseError(e).then(message => dispatch(raiseError(message)));\n    });\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport AllHoldersList from './AllHoldersList';\nimport {\n  loadHolders,\n  grantToUser,\n  revokeFromUser,\n  grantToGroup,\n  revokeFromGroup,\n  updateFilter,\n  updateQuery,\n  selectPermission\n} from '../store/actions';\nimport {\n  getPermissionsAppUsers,\n  getPermissionsAppGroups,\n  getPermissionsAppQuery,\n  getPermissionsAppFilter,\n  getPermissionsAppSelectedPermission\n} from '../../../../store/rootReducer';\nimport { Organization } from '../../../../app/types';\nimport { PermissionUser, PermissionGroup } from '../../../../api/permissions';\n\ninterface OwnProps {\n  organization?: Organization;\n}\n\ninterface StateToProps {\n  filter: string;\n  groups: PermissionGroup[];\n  query: string;\n  selectedPermission?: string;\n  users: PermissionUser[];\n}\n\ninterface DispatchToProps {\n  grantPermissionToGroup: (groupName: string, permission: string) => Promise<void>;\n  grantPermissionToUser: (login: string, permission: string) => Promise<void>;\n  loadHolders: () => void;\n  onFilter: (filter: string) => void;\n  onSearch: (query: string) => void;\n  onSelectPermission: (permission: string) => void;\n  revokePermissionFromGroup: (groupName: string, permission: string) => Promise<void>;\n  revokePermissionFromUser: (login: string, permission: string) => Promise<void>;\n}\n\nconst mapStateToProps = (state: any) => ({\n  filter: getPermissionsAppFilter(state),\n  groups: getPermissionsAppGroups(state),\n  query: getPermissionsAppQuery(state),\n  selectedPermission: getPermissionsAppSelectedPermission(state),\n  users: getPermissionsAppUsers(state)\n});\n\nconst mapDispatchToProps = (dispatch: Function, ownProps: OwnProps) => {\n  const organizationKey = ownProps.organization ? ownProps.organization.key : undefined;\n  return {\n    grantPermissionToGroup: (groupName: string, permission: string) =>\n      dispatch(grantToGroup(groupName, permission, organizationKey)),\n    grantPermissionToUser: (login: string, permission: string) =>\n      dispatch(grantToUser(login, permission, organizationKey)),\n    loadHolders: () => dispatch(loadHolders(organizationKey)),\n    onFilter: (filter: string) => dispatch(updateFilter(filter, organizationKey)),\n    onSearch: (query: string) => dispatch(updateQuery(query, organizationKey)),\n    onSelectPermission: (permission: string) =>\n      dispatch(selectPermission(permission, organizationKey)),\n    revokePermissionFromGroup: (groupName: string, permission: string) =>\n      dispatch(revokeFromGroup(groupName, permission, organizationKey)),\n    revokePermissionFromUser: (login: string, permission: string) =>\n      dispatch(revokeFromUser(login, permission, organizationKey))\n  };\n};\n\nexport default connect<StateToProps, DispatchToProps, OwnProps>(\n  mapStateToProps,\n  mapDispatchToProps\n)(AllHoldersList);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport PageHeader from './PageHeader';\nimport AllHoldersListContainer from './AllHoldersListContainer';\nimport PageError from '../../shared/components/PageError';\nimport Suggestions from '../../../../app/components/embed-docs-modal/Suggestions';\nimport { translate } from '../../../../helpers/l10n';\nimport { Organization } from '../../../../app/types';\nimport forSingleOrganization from '../../../organizations/forSingleOrganization';\nimport '../../styles.css';\n\ninterface Props {\n  organization?: Organization;\n}\n\nfunction App({ organization }: Props) {\n  return (\n    <div className=\"page page-limited\">\n      <Suggestions suggestions=\"global_permissions\" />\n      <Helmet title={translate('global_permissions.permission')} />\n      <PageHeader organization={organization} />\n      <PageError />\n      <AllHoldersListContainer organization={organization} />\n    </div>\n  );\n}\n\nexport default forSingleOrganization(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default class Suggestions extends React.PureComponent<Props> {\n  context!: { suggestions: SuggestionsContext };\n\n  static contextTypes = {\n    suggestions: PropTypes.object.isRequired\n  };\n\n  componentDidMount() {\n    this.context.suggestions.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.context.suggestions.removeSuggestions(this.props.suggestions);\n      this.context.suggestions.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.context.suggestions.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { areThereCustomOrganizations } from '../../store/rootReducer';\n\ntype ReactComponent<P> = React.ComponentClass<P> | React.StatelessComponent<P>;\n\nexport default function forSingleOrganization<P>(ComposedComponent: ReactComponent<P>) {\n  interface StateProps {\n    customOrganizations: boolean | undefined;\n  }\n\n  class ForSingleOrganization extends React.Component<StateProps & WithRouterProps> {\n    static displayName = `forSingleOrganization(${ComposedComponent.displayName})}`;\n\n    render() {\n      const { customOrganizations, router, ...other } = this.props;\n\n      if (!other.params.organizationKey && customOrganizations) {\n        router.replace('/not_found');\n        return null;\n      }\n\n      return <ComposedComponent {...other} />;\n    }\n  }\n\n  const mapStateToProps = (state: any) => ({\n    customOrganizations: areThereCustomOrganizations(state)\n  });\n\n  return connect(mapStateToProps)(withRouter(ForSingleOrganization));\n}\n"],"sourceRoot":""}