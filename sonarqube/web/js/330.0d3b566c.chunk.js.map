{"version":3,"sources":["webpack:///./src/main/js/app/components/extensions/ProjectPageExtension.tsx","webpack:///./src/main/js/app/components/extensions/utils.js","webpack:///./src/main/js/app/components/extensions/Extension.js","webpack:///./src/main/js/app/components/extensions/ExtensionContainer.tsx","webpack:///./src/main/js/app/components/extensions/ExtensionNotFound.tsx"],"names":["ProjectPageExtension","props","_a","params","extensionKey","pluginKey","component","extension","extensions","find","p","key","react__WEBPACK_IMPORTED_MODULE_0__","_ExtensionContainer__WEBPACK_IMPORTED_MODULE_1__","options","_ExtensionNotFound__WEBPACK_IMPORTED_MODULE_2__","getExtensionStart","Promise","resolve","reject","fromCache","Object","installExtensionsHandler","scriptTag","document","createElement","src","window","baseUrl","onload","getElementsByTagName","appendChild","installScript","then","start","Extension_Extension","_super","Extension","_this","apply","this","arguments","handleStart","store","getStore","stop","__assign","el","container","currentUser","intl","location","router","handleFailure","onFail","l10n","__extends","prototype","componentDidMount","startExtension","componentDidUpdate","prevProps","stopExtension","hash","componentWillUnmount","render","index_js_exposed_default","a","Helmet_default","title","name","ref","PureComponent","extensions_Extension","index_es","react_router_es","mapDispatchToProps","__webpack_exports__","es","state","rootReducer","ExtensionNotFound","id","className","react_router__WEBPACK_IMPORTED_MODULE_1__","to"],"mappings":"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","file":"js/330.0d3b566c.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ExtensionContainer from './ExtensionContainer';\nimport ExtensionNotFound from './ExtensionNotFound';\nimport { Component } from '../../types';\n\ninterface Props {\n  component: Component;\n  location: { query: { id: string } };\n  params: {\n    extensionKey: string;\n    pluginKey: string;\n  };\n}\n\nexport default function ProjectPageExtension(props: Props) {\n  const { extensionKey, pluginKey } = props.params;\n  const { component } = props;\n  const extension =\n    component.extensions &&\n    component.extensions.find(p => p.key === `${pluginKey}/${extensionKey}`);\n  return extension ? (\n    <ExtensionContainer extension={extension} options={{ component }} />\n  ) : (\n    <ExtensionNotFound />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport { getExtensionFromCache } from '../../utils/installExtensionsHandler';\n\nfunction installScript(key /*: string */) {\n  return new Promise(resolve => {\n    const scriptTag = document.createElement('script');\n    scriptTag.src = `${window.baseUrl}/static/${key}.js`;\n    scriptTag.onload = resolve;\n    document.getElementsByTagName('body')[0].appendChild(scriptTag);\n  });\n}\n\nexport function getExtensionStart(key /*: string */) {\n  return new Promise((resolve, reject) => {\n    const fromCache = getExtensionFromCache(key);\n    if (fromCache) {\n      return resolve(fromCache);\n    }\n\n    installScript(key).then(() => {\n      const start = getExtensionFromCache(key);\n      if (start) {\n        resolve(start);\n      } else {\n        reject();\n      }\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { injectIntl } from 'react-intl';\nimport { getExtensionStart } from './utils';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { translate } from '../../../helpers/l10n';\nimport getStore from '../../utils/getStore';\n\n/*::\ntype Props = {\n  currentUser: Object,\n  extension: {\n    key: string,\n    name: string\n  },\n  intl: Object,\n  location: { hash: string },\n  onFail: string => void,\n  options?: {},\n  router: Object\n};\n*/\n\nclass Extension extends React.PureComponent {\n  /*:: container: Object; */\n  /*:: props: Props; */\n  /*:: stop: ?Function; */\n\n  componentDidMount() {\n    this.startExtension();\n  }\n\n  componentDidUpdate(prevProps /*: Props */) {\n    if (prevProps.extension !== this.props.extension) {\n      this.stopExtension();\n      this.startExtension();\n    } else if (\n      prevProps.location !== this.props.location &&\n      // old router from backbone app updates hash, don't react in this case\n      prevProps.location.hash === this.props.location.hash\n    ) {\n      this.startExtension();\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopExtension();\n  }\n\n  handleStart = (start /*: Function */) => {\n    const store = getStore();\n    this.stop = start({\n      store,\n      el: this.container,\n      currentUser: this.props.currentUser,\n      intl: this.props.intl,\n      location: this.props.location,\n      router: this.props.router,\n      ...this.props.options\n    });\n  };\n\n  handleFailure = () => {\n    this.props.onFail(translate('page_extension_failed'));\n  };\n\n  startExtension() {\n    const { extension } = this.props;\n    getExtensionStart(extension.key).then(this.handleStart, this.handleFailure);\n  }\n\n  stopExtension() {\n    if (this.stop) {\n      this.stop();\n      this.stop = null;\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Helmet title={this.props.extension.name} />\n        <div ref={container => (this.container = container)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(withRouter(Extension));\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport Extension from './Extension';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\n\nconst mapStateToProps = (state: any) => ({\n  currentUser: getCurrentUser(state)\n});\n\nconst mapDispatchToProps = { onFail: addGlobalErrorMessage };\n\nexport default connect<any, any, any>(mapStateToProps, mapDispatchToProps)(Extension);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nexport default function ExtensionNotFound() {\n  return (\n    <div id=\"bd\" className=\"page-wrapper-simple\">\n      <div id=\"nonav\" className=\"page-simple\">\n        <h2 className=\"big-spacer-bottom\">The page you were looking for does not exist.</h2>\n        <p className=\"spacer-bottom\">\n          You may have mistyped the address or the page may have moved.\n        </p>\n        <p>\n          <Link to=\"/\">Go back to the homepage</Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}