{"version":3,"sources":["webpack:///./src/main/js/app/components/extensions/ProjectAdminPageExtension.js","webpack:///./src/main/js/app/components/extensions/utils.js","webpack:///./src/main/js/app/components/extensions/Extension.js","webpack:///./src/main/js/app/components/extensions/ExtensionContainer.tsx","webpack:///./src/main/js/app/components/extensions/ExtensionNotFound.tsx"],"names":["mapDispatchToProps","onFail","__webpack_exports__","Object","react_redux__WEBPACK_IMPORTED_MODULE_1__","props","_a","params","extensionKey","pluginKey","component","extension","configuration","extensions","find","p","key","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_ExtensionContainer__WEBPACK_IMPORTED_MODULE_2__","options","_ExtensionNotFound__WEBPACK_IMPORTED_MODULE_3__","getExtensionStart","Promise","resolve","reject","fromCache","installExtensionsHandler","scriptTag","document","src","window","baseUrl","onload","getElementsByTagName","appendChild","installScript","then","start","Extension_Extension","_super","Extension","_this","apply","this","arguments","handleStart","store","getStore","stop","__assign","el","container","currentUser","intl","location","router","handleFailure","l10n","__extends","prototype","componentDidMount","startExtension","componentDidUpdate","prevProps","stopExtension","hash","componentWillUnmount","render","index_js_exposed_default","Helmet_default","title","name","ref","PureComponent","extensions_Extension","index_es","react_router_es","es","state","rootReducer","ExtensionNotFound","react__WEBPACK_IMPORTED_MODULE_0__","id","className","react_router__WEBPACK_IMPORTED_MODULE_1__","to"],"mappings":"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","file":"js/328.2e48efc5.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport ExtensionContainer from './ExtensionContainer';\nimport ExtensionNotFound from './ExtensionNotFound';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\n\n/*::\ntype Props = {\n  component: {\n    configuration?: {\n      extensions: Array<{ key: string }>\n    }\n  },\n  location: { query: { id: string } },\n  params: {\n    extensionKey: string,\n    pluginKey: string\n  }\n};\n*/\n\nfunction ProjectAdminPageExtension(props /*: Props */) {\n  const { extensionKey, pluginKey } = props.params;\n  const { component } = props;\n  const extension =\n    component.configuration &&\n    component.configuration.extensions.find(p => p.key === `${pluginKey}/${extensionKey}`);\n  return extension ? (\n    <ExtensionContainer extension={extension} options={{ component }} />\n  ) : (\n    <ExtensionNotFound />\n  );\n}\n\nconst mapDispatchToProps = { onFail: addGlobalErrorMessage };\n\nexport default connect(null, mapDispatchToProps)(ProjectAdminPageExtension);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport { getExtensionFromCache } from '../../utils/installExtensionsHandler';\n\nfunction installScript(key /*: string */) {\n  return new Promise(resolve => {\n    const scriptTag = document.createElement('script');\n    scriptTag.src = `${window.baseUrl}/static/${key}.js`;\n    scriptTag.onload = resolve;\n    document.getElementsByTagName('body')[0].appendChild(scriptTag);\n  });\n}\n\nexport function getExtensionStart(key /*: string */) {\n  return new Promise((resolve, reject) => {\n    const fromCache = getExtensionFromCache(key);\n    if (fromCache) {\n      return resolve(fromCache);\n    }\n\n    installScript(key).then(() => {\n      const start = getExtensionFromCache(key);\n      if (start) {\n        resolve(start);\n      } else {\n        reject();\n      }\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// @flow\nimport React from 'react';\nimport Helmet from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { injectIntl } from 'react-intl';\nimport { getExtensionStart } from './utils';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { translate } from '../../../helpers/l10n';\nimport getStore from '../../utils/getStore';\n\n/*::\ntype Props = {\n  currentUser: Object,\n  extension: {\n    key: string,\n    name: string\n  },\n  intl: Object,\n  location: { hash: string },\n  onFail: string => void,\n  options?: {},\n  router: Object\n};\n*/\n\nclass Extension extends React.PureComponent {\n  /*:: container: Object; */\n  /*:: props: Props; */\n  /*:: stop: ?Function; */\n\n  componentDidMount() {\n    this.startExtension();\n  }\n\n  componentDidUpdate(prevProps /*: Props */) {\n    if (prevProps.extension !== this.props.extension) {\n      this.stopExtension();\n      this.startExtension();\n    } else if (\n      prevProps.location !== this.props.location &&\n      // old router from backbone app updates hash, don't react in this case\n      prevProps.location.hash === this.props.location.hash\n    ) {\n      this.startExtension();\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopExtension();\n  }\n\n  handleStart = (start /*: Function */) => {\n    const store = getStore();\n    this.stop = start({\n      store,\n      el: this.container,\n      currentUser: this.props.currentUser,\n      intl: this.props.intl,\n      location: this.props.location,\n      router: this.props.router,\n      ...this.props.options\n    });\n  };\n\n  handleFailure = () => {\n    this.props.onFail(translate('page_extension_failed'));\n  };\n\n  startExtension() {\n    const { extension } = this.props;\n    getExtensionStart(extension.key).then(this.handleStart, this.handleFailure);\n  }\n\n  stopExtension() {\n    if (this.stop) {\n      this.stop();\n      this.stop = null;\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Helmet title={this.props.extension.name} />\n        <div ref={container => (this.container = container)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(withRouter(Extension));\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport Extension from './Extension';\nimport { getCurrentUser } from '../../../store/rootReducer';\nimport { addGlobalErrorMessage } from '../../../store/globalMessages/duck';\n\nconst mapStateToProps = (state: any) => ({\n  currentUser: getCurrentUser(state)\n});\n\nconst mapDispatchToProps = { onFail: addGlobalErrorMessage };\n\nexport default connect<any, any, any>(mapStateToProps, mapDispatchToProps)(Extension);\n","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\nexport default function ExtensionNotFound() {\n  return (\n    <div id=\"bd\" className=\"page-wrapper-simple\">\n      <div id=\"nonav\" className=\"page-simple\">\n        <h2 className=\"big-spacer-bottom\">The page you were looking for does not exist.</h2>\n        <p className=\"spacer-bottom\">\n          You may have mistyped the address or the page may have moved.\n        </p>\n        <p>\n          <Link to=\"/\">Go back to the homepage</Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}